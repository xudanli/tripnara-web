# Dashboard 重新设计 - 完整方案

## 一、产品经理 PRD 核心章节

### 0.6 总体方案概览

#### 信息架构设计

**三层信息架构**：

1. **顶层：欢迎与状态概览**
   - 欢迎区域（WelcomeSection）：个性化问候、当前行程快速概览
   - 状态卡片（可选）：当前行程的关键状态（规划进度、预算状态、决策点）

2. **中层：快捷入口与任务**
   - 快捷入口（QuickAccessSection）：国家知识库、路线模版、我的行程
   - 今日任务（TodayTasksSection）：待办事项、需要确认的决策点

3. **底层：对话界面**
   - 自然语言对话界面（NLChatInterface）：主要交互方式，支持继续规划

**布局设计**：

```
┌─────────────────────────────────────────────────┐
│           Dashboard TopBar (顶部导航)            │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌──────────────────────────────────────────┐  │
│  │  ConversationHistorySidebar (左侧)        │  │
│  │  - 对话历史列表                            │  │
│  │  - 新建会话                                │  │
│  └──────────────────────────────────────────┘  │
│                                                 │
│  ┌──────────────────────────────────────────┐  │
│  │  主内容区（右侧）                          │  │
│  │                                           │  │
│  │  ┌────────────────────────────────────┐  │  │
│  │  │  WelcomeSection (欢迎区域)          │  │  │
│  │  │  - 个性化问候                       │  │  │
│  │  │  - 当前行程概览（如有）              │  │  │
│  │  └────────────────────────────────────┘  │  │
│  │                                           │  │
│  │  ┌────────────────────────────────────┐  │  │
│  │  │  QuickAccessSection (快捷入口)      │  │  │
│  │  │  - 国家知识库                       │  │  │
│  │  │  - 路线模版                        │  │  │
│  │  │  - 我的行程                        │  │  │
│  │  └────────────────────────────────────┘  │  │
│  │                                           │  │
│  │  ┌────────────────────────────────────┐  │  │
│  │  │  TodayTasksSection (今日任务)       │  │  │
│  │  │  - 待办事项                        │  │  │
│  │  │  - 决策点提醒                      │  │  │
│  │  └────────────────────────────────────┘  │  │
│  │                                           │  │
│  │  ┌────────────────────────────────────┐  │  │
│  │  │  NLChatInterface (对话界面)         │  │  │
│  │  │  - 自然语言交互                     │  │  │
│  │  │  - 继续规划                        │  │  │
│  │  └────────────────────────────────────┘  │  │
│  │                                           │  │
│  └──────────────────────────────────────────┘  │
│                                                 │
└─────────────────────────────────────────────────┘
```

**响应式设计**：
- **桌面端**（≥1024px）：左侧对话历史侧边栏 + 右侧主内容区（欢迎区域、快捷入口、任务、对话界面）
- **平板端**（768px-1023px）：可折叠的对话历史侧边栏 + 主内容区
- **移动端**（<768px）：隐藏对话历史侧边栏，主内容区全屏，底部导航栏

#### 组件组织

**组件层级**：
```
DashboardPage (src/pages/Dashboard.tsx)
├── WelcomeModal (首次用户引导)
├── ConversationHistorySidebar (对话历史)
└── MainContentArea
    ├── WelcomeSection (欢迎区域)
    ├── QuickAccessSection (快捷入口)
    ├── TodayTasksSection (今日任务)
    └── NLChatInterface (对话界面)
```

### 0.7 关键流程

#### 用户流程

**流程1：首次用户登录**
1. 用户登录 → Dashboard 页面加载
2. 显示 Welcome Modal（引导选择体验类型）
3. 用户选择体验类型 → 关闭 Modal
4. 显示欢迎区域（介绍功能）
5. 显示快捷入口（快速访问）
6. 显示对话界面（引导开始规划）
7. 用户通过对话或快捷入口创建行程

**流程2：回访用户（有当前行程）**
1. 用户登录 → Dashboard 页面加载
2. 获取当前行程数据
3. 显示欢迎区域（显示当前行程信息）
4. 显示快捷入口（快速访问功能）
5. 显示今日任务（待办事项、决策点）
6. 显示对话界面（继续规划）
7. 用户点击"继续规划"或通过对话继续

**流程3：回访用户（无当前行程）**
1. 用户登录 → Dashboard 页面加载
2. 显示欢迎区域（鼓励创建新行程）
3. 显示快捷入口（快速访问功能）
4. 显示对话界面（创建新行程）
5. 用户通过对话或快捷入口创建行程

#### 状态流

**页面加载状态**：
- `loading`：加载中，显示 Spinner
- `loaded`：加载完成，显示内容
- `error`：加载失败，显示错误提示

**数据状态**：
- `trips`：行程列表（`TripListItem[]`）
- `activeTrip`：当前活跃行程（`TripDetail | null`）
- `tasks`：待办任务列表（可选）

#### 异常流

**异常1：数据加载失败**
- 显示错误提示
- 提供重试按钮
- 允许用户继续使用对话界面

**异常2：当前行程不存在**
- 显示欢迎区域（无当前行程状态）
- 引导用户创建新行程

**异常3：网络超时**
- 显示超时提示
- 提供重试按钮
- 允许用户使用离线功能（如果有）

### 0.8 页面与交互设计

#### 欢迎区域（WelcomeSection）

**设计要点**：
- **有当前行程时**：显示行程名称、目的地、日期、天数、当前阶段、快速操作按钮
- **无当前行程时**：显示个性化问候、鼓励创建新行程的文案、创建按钮

**交互设计**：
- 点击"继续规划" → 跳转到行程详情页
- 点击"查看路线地图" → 跳转到行程详情页的地图视图
- 点击"邀请同行人" → 跳转到行程详情页的协作功能

#### 快捷入口（QuickAccessSection）

**设计要点**：
- 三个入口：国家知识库、路线模版、我的行程
- 每个入口：图标 + 标题 + 描述
- 卡片式设计，支持悬停效果

**交互设计**：
- 点击卡片 → 跳转到对应页面
- 支持键盘导航（Tab 键切换，Enter 键确认）
- 移动端：触摸反馈

#### 今日任务（TodayTasksSection）

**设计要点**：
- 显示待办事项（需要澄清的问题、需要确认的决策点）
- 显示预算状态（如有预算预警）
- 显示三人格提醒（如有需要关注的决策）

**交互设计**：
- 点击任务项 → 跳转到对应页面或展开详情
- 支持标记完成
- 支持快速操作（如"立即处理"）

#### 对话界面（NLChatInterface）

**设计要点**：
- 保持现有对话界面的核心功能
- 传递当前行程上下文（如有）
- 显示对话历史（通过左侧侧边栏）

**交互设计**：
- 支持自然语言输入
- 支持快捷回复
- 支持澄清问题交互
- 支持决策确认流程

---

## 二、人机交互设计专家认知科学分析

### 认知负荷分析

#### 内在认知负荷（Intrinsic Cognitive Load）

**当前问题**：
- Dashboard 信息单一（只有对话界面），用户需要记住通过对话访问功能
- 缺少结构化信息展示，用户需要主动询问才能了解状态

**优化方案**：
- **信息分层展示**：欢迎区域 → 快捷入口 → 任务 → 对话界面，符合 Miller's Law（7±2 信息块）
- **渐进式披露**：默认显示关键信息，详细信息通过点击展开
- **视觉层次清晰**：使用卡片、间距、颜色区分不同信息层级

#### 外在认知负荷（Extraneous Cognitive Load）

**当前问题**：
- 所有功能需要通过对话访问，增加了不必要的认知负担
- 缺少视觉引导，用户不知道从哪里开始

**优化方案**：
- **快捷入口**：直接暴露核心功能，减少对话轮次
- **状态可视化**：使用图标、颜色、进度条等视觉元素展示状态
- **一致性设计**：统一的交互模式，降低学习成本

#### 相关认知负荷（Germane Cognitive Load）

**当前问题**：
- 缺少上下文帮助和引导
- 新手用户不知道如何使用产品

**优化方案**：
- **Welcome Modal**：首次用户引导，介绍核心功能
- **欢迎区域**：根据用户状态（有/无行程）显示不同内容
- **任务提示**：明确告知用户需要做什么

### 信息架构评估

#### Miller's Law（米勒定律）应用

**信息分块设计**：
- **欢迎区域**：1 个信息块（当前行程或欢迎信息）
- **快捷入口**：3 个信息块（国家知识库、路线模版、我的行程），符合 7±2 原则
- **今日任务**：最多 5 个任务项，符合 7±2 原则
- **对话界面**：1 个信息块（对话交互区域）

**总计**：4-6 个主要信息块，符合 Miller's Law

#### Hick's Law（希克定律）应用

**选择数量控制**：
- **快捷入口**：3 个选项（符合 Hick's Law，选择数量适中）
- **今日任务**：最多 5 个任务项（符合 Hick's Law）
- **对话快捷回复**：最多 4-5 个选项（符合 Hick's Law）

**决策时间优化**：
- 快捷入口减少决策时间（直接点击 vs 通过对话）
- 任务列表清晰展示，减少选择困难

### 交互模式评估

#### Fitts's Law（费茨定律）应用

**点击目标设计**：
- **快捷入口卡片**：最小点击区域 44×44px（符合 Fitts's Law）
- **按钮**：最小点击区域 44×44px
- **任务项**：最小点击区域 44×44px
- **移动端**：考虑拇指热区，常用操作放在易于到达的位置

#### Affordance（示能性）应用

**界面元素设计**：
- **卡片**：使用阴影、悬停效果，清晰表达可点击
- **按钮**：使用明确的视觉样式（颜色、形状），表达功能
- **输入框**：清晰的边框、占位符，表达可输入
- **状态指示**：使用图标、颜色、动画，清晰表达状态

#### Feedback（反馈）应用

**交互反馈设计**：
- **即时反馈**：点击卡片立即显示悬停效果（<100ms）
- **视觉反馈**：加载状态、成功提示、错误提示（<1s）
- **状态反馈**：页面加载、数据获取、操作结果都有明确反馈

### 渐进式披露（Progressive Disclosure）

**信息展示策略**：
- **默认状态**：显示关键信息（欢迎区域、快捷入口、主要任务）
- **展开状态**：点击查看详情（任务详情、决策日志、预算明细）
- **对话界面**：默认显示，但可以通过折叠节省空间（移动端）

**符合认知科学原理**：
- 符合"分块处理"原理：复杂信息分块呈现
- 符合"注意力资源有限"原理：只显示当前需要的信息

### 可用性问题识别

#### 问题1：信息架构单一
- **问题**：只有对话界面，缺少结构化信息展示
- **影响**：用户需要记住通过对话访问功能，认知负荷高
- **优化**：添加快捷入口和状态概览

#### 问题2：缺少状态反馈
- **问题**：用户无法快速了解当前行程状态
- **影响**：用户需要主动询问才能了解状态
- **优化**：添加欢迎区域和状态卡片

#### 问题3：新手引导不足
- **问题**：首次用户不知道如何使用产品
- **影响**：用户流失率高
- **优化**：添加 Welcome Modal 和欢迎区域

### 优化建议（按优先级排序）

#### 优先级1：信息架构优化
- **方案**：添加快捷入口和状态概览
- **理论依据**：Miller's Law、Hick's Law、认知负荷理论
- **预期效果**：降低认知负荷 30%，提升任务完成效率 25%

#### 优先级2：状态可视化
- **方案**：添加欢迎区域和状态卡片
- **理论依据**：Affordance、Feedback、渐进式披露
- **预期效果**：提升用户满意度 15%，减少用户困惑 20%

#### 优先级3：新手引导
- **方案**：优化 Welcome Modal 和欢迎区域
- **理论依据**：相关认知负荷、上下文帮助
- **预期效果**：提升新手用户留存率 20%

### 无障碍设计

#### WCAG 2.1 AA 标准

**键盘导航**：
- 所有交互元素支持 Tab 键导航
- 支持 Enter 键确认、Esc 键取消
- 焦点状态清晰可见

**屏幕阅读器**：
- 使用语义化 HTML（`<nav>`、`<main>`、`<section>`）
- 添加 ARIA 标签（`aria-label`、`aria-describedby`）
- 状态变化时公告（`aria-live`）

**颜色对比度**：
- 文本对比度 ≥ 4.5:1
- 大文本对比度 ≥ 3:1
- 交互元素对比度 ≥ 3:1

### 验收标准

#### 可用性测试指标

**任务完成率**：
- 首次用户创建行程成功率 ≥ 80%
- 回访用户继续规划成功率 ≥ 90%
- 快捷入口点击率 ≥ 30%

**任务完成时间**：
- 首次用户创建行程时间 ≤ 3 分钟
- 回访用户继续规划时间 ≤ 30 秒
- 快捷入口访问时间 ≤ 2 秒

**用户满意度**：
- NPS ≥ 50
- SUS 可用性得分 ≥ 80
- 认知负荷评分 ≤ 3（5 分制）

#### 认知负荷评估方法

**主观评估**：
- NASA-TLX 认知负荷量表
- 用户访谈（询问用户感受）

**客观评估**：
- 任务完成时间
- 错误率
- 眼动追踪（如条件允许）

### 埋点清单

**页面级埋点**：
- `dashboard_page_view`：Dashboard 页面访问
  - 属性：`user_type`（new/returning）、`has_active_trip`（true/false）

**组件级埋点**：
- `welcome_section_view`：欢迎区域展示
  - 属性：`has_active_trip`（true/false）
- `quick_access_section_view`：快捷入口展示
- `today_tasks_section_view`：今日任务展示
  - 属性：`task_count`（任务数量）

**交互埋点**：
- `quick_access_click`：快捷入口点击
  - 属性：`item_id`（country_knowledge/route_template/my_trips）
- `welcome_section_cta_click`：欢迎区域 CTA 点击
  - 属性：`cta_type`（continue_planning/view_map/invite）
- `today_task_click`：今日任务点击
  - 属性：`task_id`、`task_type`

**转化埋点**：
- `dashboard_to_trip_created`：从 Dashboard 到行程创建的转化
  - 属性：`entry_point`（quick_access/chat/direct）

### 理论依据

**已核验的认知科学理论**：
- **Miller's Law**：人类工作记忆容量 7±2（已核验，来源：Miller, 1956）
- **Hick's Law**：选择数量与决策时间的关系（已核验，来源：Hick, 1952）
- **Fitts's Law**：点击目标大小与点击时间的关系（已核验，来源：Fitts, 1954）
- **认知负荷理论**：内在/外在/相关认知负荷（已核验，来源：Sweller, 1988）

**待确认问题**：
- 快捷入口的具体位置（上方 vs 下方）需要用户测试验证
- 今日任务的具体展示方式（列表 vs 卡片）需要用户测试验证

---

## 三、综合设计方案

### 最终信息架构

**推荐方案**：三层信息架构 + 对话界面

1. **欢迎区域**（顶部）
   - 个性化问候
   - 当前行程快速概览（如有）
   - 快速操作按钮

2. **快捷入口**（中部）
   - 国家知识库
   - 路线模版
   - 我的行程

3. **今日任务**（中部，可选）
   - 待办事项
   - 决策点提醒
   - 预算状态

4. **对话界面**（底部，主要交互区域）
   - 自然语言交互
   - 继续规划
   - 创建新行程

### 实施优先级

**Phase 1：核心功能**（1-2 周）
- 集成 WelcomeSection
- 集成 QuickAccessSection
- 保持 NLChatInterface 核心地位

**Phase 2：增强功能**（2-3 周）
- 集成 TodayTasksSection
- 优化响应式设计
- 完善无障碍访问

**Phase 3：优化迭代**（持续）
- 用户测试和反馈收集
- 数据分析和优化
- A/B 测试（如需要）

### 风险与对策

**风险1：对话界面被弱化**
- **对策**：保持对话界面在视觉和交互上的核心地位，快捷入口作为补充

**风险2：信息过载**
- **对策**：渐进式披露，默认折叠次要信息，移动端简化布局

**风险3：性能问题**
- **对策**：懒加载、代码分割、虚拟滚动、性能监控

---

**下一步**：请产品经理和人机交互设计专家协作，细化具体组件设计和交互细节。
