# 搜索附近功能 - UI/UX 设计方案

**文档版本**: v1.0  
**创建日期**: 2026-02-06  
**设计角色**: 产品经理 + 人机交互设计专家

---

## 📋 一、功能概述

### 1.1 核心功能
基于每个行程点搜索附近的地点，支持按类别筛选：
- 🏛️ **景点** (ATTRACTION)
- 🍽️ **餐厅** (RESTAURANT)
- 🏨 **酒店** (HOTEL)
- ☕ **休息点** (CAFE)
- ⛽ **加油站** (TRANSPORT)

### 1.2 用户场景
用户在规划行程时，想要：
- 在某个景点附近找餐厅
- 在某个地点附近找酒店
- 在路上找加油站或休息点
- 快速添加附近的地点到行程中

---

## 🎨 二、UI/UX 设计方案

### 2.1 入口设计（行程项菜单）

#### 方案 A：子菜单展开式（推荐）⭐⭐⭐

**设计思路**：
- 在行程项的三点菜单中，添加"搜索附近"主菜单项
- 鼠标悬停或点击时，展开子菜单显示所有类别
- 使用图标 + 文字，清晰直观

**视觉设计**：
```
┌─────────────────────┐
│  ⋮ (三点菜单)        │
├─────────────────────┤
│ 🔍 搜索附近    →    │ ← 主菜单项，右侧箭头表示有子菜单
│ ├─ ⭐ 景点          │
│ ├─ 🍽️ 餐厅          │
│ ├─ 🏨 酒店          │
│ ├─ ☕ 休息点         │
│ └─ ⛽ 加油站        │
├─────────────────────┤
│ ✏️ 编辑              │
│ 🔄 替换              │
│ 🗑️ 删除              │
└─────────────────────┘
```

**交互流程**：
1. 用户点击行程项右侧的三点菜单
2. 看到"搜索附近"选项（带右箭头图标）
3. 鼠标悬停或点击"搜索附近"
4. 子菜单从右侧展开，显示5个类别选项
5. 点击任意类别，打开搜索对话框

**优点**：
- ✅ 层次清晰，不占用太多空间
- ✅ 符合用户对子菜单的认知习惯
- ✅ 支持键盘导航
- ✅ 移动端友好（点击展开）

---

#### 方案 B：平铺式菜单（备选）

**设计思路**：
- 直接在菜单中列出所有类别选项
- 使用分组和分隔线区分

**视觉设计**：
```
┌─────────────────────┐
│  ⋮ (三点菜单)        │
├─────────────────────┤
│ 🔍 搜索附近          │ ← 分组标题
│ ├─ ⭐ 景点          │
│ ├─ 🍽️ 餐厅          │
│ ├─ 🏨 酒店          │
│ ├─ ☕ 休息点         │
│ └─ ⛽ 加油站        │
├─────────────────────┤
│ ✏️ 编辑              │
│ 🔄 替换              │
│ 🗑️ 删除              │
└─────────────────────┘
```

**优点**：
- ✅ 一目了然，无需展开
- ✅ 操作步骤少

**缺点**：
- ❌ 菜单项较多，可能显得拥挤
- ❌ 移动端体验不佳

---

### 2.2 搜索对话框设计

#### 对话框布局

**顶部区域**：
- 标题："搜索附近地点"
- 副标题：显示当前行程点名称（如"辛格维利尔国家公园附近"）
- 关闭按钮

**搜索区域**：
- 自动切换到"附近"搜索模式（不可切换）
- 显示当前搜索中心点（行程点名称 + 坐标）
- 类别筛选器（已预选用户点击的类别）

**结果区域**：
- 显示搜索结果列表
- 每个结果卡片包含：
  - 地点名称（中英文）
  - 类别图标
  - 距离（米/公里）
  - 评分（如果有）
  - 地址
  - "添加到行程"按钮

**底部区域**：
- 取消/关闭按钮

---

### 2.3 状态设计

#### 正常状态
- 菜单项正常显示，可点击
- 图标和文字清晰可见

#### 禁用状态
- 如果行程点没有坐标信息：
  - 菜单项显示为灰色（opacity: 0.5）
  - 显示"（需坐标）"提示
  - 点击时显示错误提示："该地点没有坐标信息，无法搜索附近"

#### 加载状态
- 打开对话框时显示加载动画
- 搜索时显示"搜索中..."提示

#### 空结果状态
- 显示友好提示："附近没有找到该类别的地点"
- 提供"扩大搜索范围"选项

---

## 🎯 三、交互设计细节

### 3.1 菜单交互

**桌面端**：
- 鼠标悬停在"搜索附近"上 → 子菜单自动展开
- 鼠标移出子菜单 → 子菜单自动收起
- 点击子菜单项 → 执行搜索，关闭菜单

**移动端**：
- 点击"搜索附近" → 子菜单展开
- 点击子菜单项 → 执行搜索，关闭菜单
- 点击菜单外部 → 关闭菜单

### 3.2 搜索对话框交互

**打开流程**：
1. 用户点击类别选项
2. 对话框从中心淡入显示
3. 自动执行搜索（显示加载状态）
4. 显示搜索结果

**搜索流程**：
- 自动使用行程点坐标作为搜索中心
- 自动应用类别筛选
- 搜索半径：5公里（可配置）
- 显示距离和评分信息

**添加流程**：
1. 用户点击结果卡片或"添加到行程"按钮
2. 进入时间配置模式
3. 选择日期和时间
4. 确认添加

---

## 📱 四、响应式设计

### 4.1 桌面端（≥768px）
- 子菜单从右侧展开
- 对话框宽度：最大 800px
- 搜索结果：2列网格布局

### 4.2 移动端（<768px）
- 子菜单全屏显示或从底部弹出
- 对话框：全屏或接近全屏
- 搜索结果：单列布局
- 触摸友好的按钮尺寸（≥44px）

---

## 🎨 五、视觉设计规范

### 5.1 颜色方案

**主色调**：
- 搜索附近：蓝色系（#3b82f6）
- 景点：金色（#f59e0b）
- 餐厅：红色（#ef4444）
- 酒店：紫色（#9333ea）
- 休息点：棕色（#a16207）
- 加油站：绿色（#10b981）

**状态颜色**：
- 正常：文本颜色
- 悬停：背景色（#f3f4f6）
- 禁用：灰色（#9ca3af）
- 错误：红色（#ef4444）

### 5.2 图标设计

**图标库**：Lucide React
- 搜索附近：`MapPin` 或 `Navigation`
- 景点：`Star` 或 `Landmark`
- 餐厅：`Utensils` 或 `UtensilsCrossed`
- 酒店：`Hotel` 或 `Building`
- 休息点：`Coffee` 或 `Coffee`
- 加油站：`Fuel` 或 `Droplet`

### 5.3 间距规范

- 菜单项内边距：`px-2 py-1.5`
- 图标与文字间距：`gap-2` (8px)
- 子菜单项间距：`space-y-1`
- 菜单分组间距：`my-1`

---

## 🔍 六、可用性考虑

### 6.1 可发现性
- ✅ 菜单项使用清晰的图标和文字
- ✅ 子菜单使用右箭头提示可展开
- ✅ 悬停时显示视觉反馈

### 6.2 可访问性
- ✅ 支持键盘导航（Tab, Enter, Esc）
- ✅ 支持屏幕阅读器（ARIA 标签）
- ✅ 足够的对比度（WCAG AA）

### 6.3 性能优化
- ✅ 延迟加载搜索结果
- ✅ 防抖搜索输入
- ✅ 缓存搜索结果

---

## 📊 七、用户测试建议

### 7.1 A/B 测试
- **A组**：子菜单展开式（方案A）
- **B组**：平铺式菜单（方案B）
- **指标**：点击率、完成率、用户满意度

### 7.2 可用性测试
- 任务：在行程中添加附近餐厅
- 观察：用户是否能快速找到功能
- 记录：操作步骤、错误次数、时间

---

## ✅ 八、实施优先级

### P0（必须）
- ✅ 子菜单结构实现
- ✅ 5个类别选项
- ✅ 搜索对话框集成
- ✅ 坐标检测和错误处理

### P1（重要）
- ✅ 加载状态显示
- ✅ 空结果处理

### P2（优化）
- ⚠️ 键盘导航支持
- ⚠️ 移动端优化
- ⚠️ 搜索结果缓存

---

## 🎯 九、最终推荐方案

**推荐使用方案 A：子菜单展开式**

**理由**：
1. ✅ 符合用户对菜单的认知习惯
2. ✅ 节省空间，界面更简洁
3. ✅ 支持未来扩展更多类别
4. ✅ 移动端体验良好

**实施要点**：
1. 使用 `DropdownMenuSub` 组件实现子菜单
2. 每个类别使用对应的图标和颜色
3. 支持鼠标悬停和点击两种交互方式
4. 提供清晰的视觉反馈

---

**文档结束**
