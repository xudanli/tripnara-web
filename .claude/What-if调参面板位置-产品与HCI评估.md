# What-if 调参面板位置 - 产品经理与HCI专家联合评估

> 评估日期：2026-02-09  
> 评估对象：DrDreView（节奏tab）中的"What-if 调参"面板  
> 评估人员：产品经理 + 人机交互设计专家

---

## 📋 一、当前实现分析

### 1.1 当前布局

**页面结构**：
```
┌─────────────────────────────────────────────────────────┐
│ Header: 健康度、KPI卡片                                  │
├─────────────────────────────────────────────────────────┤
│ Tabs: [总览] [规划] [预算]                              │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌──────────────────────┐  ┌──────────────────────┐    │
│  │                      │  │                      │    │
│  │  行程项时间轴        │  │  What-if 调参        │    │
│  │  (左侧，8列)         │  │  (右侧，4列)         │    │
│  │                      │  │                      │    │
│  │  - 日期1             │  │  - 优先级滑杆        │    │
│  │    - 行程项1         │  │  - 约束开关+输入     │    │
│  │    - 行程项2         │  │  - 操作按钮          │    │
│  │  - 日期2             │  │                      │    │
│  │    - 行程项3         │  │                      │    │
│  │                      │  │                      │    │
│  └──────────────────────┘  └──────────────────────┘    │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**当前位置**：右侧边栏（`lg:col-span-4`），与行程项时间轴并排显示

---

## 🎯 二、产品经理评估

### 2.1 用户场景分析

**主要使用场景**：
1. **发现问题**：用户查看行程项，发现"时间冲突"等节奏问题
2. **调整参数**：用户想要调整优先级或约束条件
3. **重新排程**：点击"一键重新排程"生成新方案
4. **对比方案**：查看不同参数下的方案对比

**用户行为路径**：
```
查看问题 → 调整参数 → 重新排程 → 查看结果 → (循环)
```

### 2.2 产品功能定位

**What-if 调参的核心价值**：
- ✅ **即时反馈**：调整参数后立即看到效果
- ✅ **探索性**：用户可以尝试不同的参数组合
- ✅ **控制感**：用户对排程结果有明确的控制权

**当前实现的问题**：
1. ⚠️ **位置固定**：右侧边栏位置固定，在小屏幕上可能被遮挡
2. ⚠️ **视觉分离**：调参面板与受影响的行程项在视觉上分离
3. ⚠️ **操作流程**：需要频繁在左侧（查看问题）和右侧（调整参数）之间切换视线

### 2.3 产品建议

**方案A：保持右侧边栏，优化交互**
- ✅ 优点：不改变现有布局，开发成本低
- ⚠️ 缺点：仍然存在视觉分离问题
- 📌 适用场景：快速迭代，保持现状

**方案B：浮动面板（Floating Panel）**
- ✅ 优点：可以拖拽位置，用户自定义
- ⚠️ 缺点：增加复杂度，可能遮挡内容
- 📌 适用场景：高级用户，需要灵活控制

**方案C：顶部工具栏（Top Toolbar）**
- ✅ 优点：始终可见，与内容区域分离清晰
- ⚠️ 缺点：占用垂直空间，可能压缩内容区域
- 📌 适用场景：参数调整是主要操作

**方案D：折叠式侧边栏（Collapsible Sidebar）**
- ✅ 优点：可以展开/收起，节省空间
- ⚠️ 缺点：收起时功能不可见
- 📌 适用场景：需要更多内容展示空间时

**产品经理推荐**：**方案C（顶部工具栏）** + **方案D（折叠式侧边栏）** 组合
- 默认显示在顶部（KPI卡片下方），方便快速调整
- 支持折叠到右侧边栏，满足需要更多内容空间的场景

---

## 🎨 三、HCI专家评估

### 3.1 人机交互原则分析

#### 3.1.1 接近性原则（Proximity Principle）

**原则**：相关的控件应该靠近显示

**当前问题**：
- ❌ 调参面板与受影响的行程项在视觉上分离（左侧 vs 右侧）
- ❌ 用户需要频繁切换视线焦点

**HCI评估**：
> "调参面板应该靠近它影响的行程项，或者至少在同一视觉区域内。当前的左右分离布局违反了接近性原则，增加了用户的认知负担。"

#### 3.1.2 可见性原则（Visibility Principle）

**原则**：常用功能应该始终可见

**当前问题**：
- ⚠️ 右侧边栏在小屏幕上可能被遮挡或需要滚动
- ⚠️ 用户需要滚动才能看到调参面板

**HCI评估**：
> "如果参数调整是解决节奏问题的关键操作，它应该始终可见。当前实现中，用户可能需要滚动才能看到调参面板，这违反了可见性原则。"

#### 3.1.3 一致性原则（Consistency Principle）

**原则**：相似的功能应该有相似的布局和交互

**当前问题**：
- ✅ 与规划工作台的布局一致（左侧内容，右侧操作）
- ⚠️ 但在节奏tab中，调参是主要操作，不是辅助操作

**HCI评估**：
> "虽然与规划工作台保持一致是好的，但在节奏tab中，调参是核心操作，应该给予更高的视觉优先级。"

#### 3.1.4 反馈原则（Feedback Principle）

**原则**：用户操作应该有明确的反馈

**当前问题**：
- ✅ 重新排程后有toast提示
- ⚠️ 但参数调整的即时反馈不够明显（需要点击重新排程才能看到效果）

**HCI评估**：
> "参数调整后，应该有即时的视觉反馈，比如预览效果或高亮显示受影响的行程项。当前实现需要用户主动点击重新排程才能看到效果，反馈不够及时。"

### 3.2 认知负荷分析

**当前布局的认知负荷**：
1. **视觉搜索**：用户需要在左右两侧之间切换视线（高负荷）
2. **空间记忆**：用户需要记住左侧的问题和右侧的参数（中等负荷）
3. **操作记忆**：用户需要记住调整了哪些参数（中等负荷）

**优化后的认知负荷**：
1. **视觉搜索**：参数面板靠近内容区域，减少视线移动（低负荷）
2. **空间记忆**：参数和内容在同一视觉区域（低负荷）
3. **操作记忆**：参数调整有即时反馈（低负荷）

### 3.3 HCI建议

**推荐方案：顶部工具栏 + 即时反馈**

**布局建议**：
```
┌─────────────────────────────────────────────────────────┐
│ Header: 健康度、KPI卡片                                  │
├─────────────────────────────────────────────────────────┤
│ Tabs: [总览] [规划] [预算]                              │
├─────────────────────────────────────────────────────────┤
│ ┌───────────────────────────────────────────────────┐ │
│ │ What-if 调参 (可折叠)                              │ │
│ │ [优先级滑杆] [约束开关] [操作按钮]                 │ │
│ └───────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  行程项时间轴 (全宽)                                     │
│  - 日期1                                                 │
│    - 行程项1 (高亮显示受影响的项)                        │
│    - 行程项2                                             │
│  - 日期2                                                 │
│    - 行程项3                                             │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**关键改进**：
1. ✅ **顶部位置**：调参面板在顶部，始终可见
2. ✅ **可折叠**：支持折叠，节省空间
3. ✅ **即时反馈**：参数调整后，高亮显示受影响的行程项
4. ✅ **视觉关联**：调参面板和内容区域在同一垂直流中

---

## 📊 四、综合评估与建议

### 4.1 优先级评估

| 方案 | 开发成本 | 用户体验提升 | 推荐度 |
|------|---------|------------|--------|
| A. 保持右侧边栏 | ⭐ 低 | ⭐⭐ 中 | ⭐⭐ |
| B. 浮动面板 | ⭐⭐⭐ 高 | ⭐⭐⭐ 高 | ⭐⭐ |
| C. 顶部工具栏 | ⭐⭐ 中 | ⭐⭐⭐⭐ 高 | ⭐⭐⭐⭐ |
| D. 折叠式侧边栏 | ⭐⭐ 中 | ⭐⭐⭐ 中 | ⭐⭐⭐ |

### 4.2 最终建议

**推荐方案：顶部工具栏（可折叠）**

**实施步骤**：
1. **Phase 1（快速迭代）**：
   - 将调参面板移到顶部（KPI卡片下方）
   - 添加折叠/展开功能
   - 保持现有功能不变

2. **Phase 2（体验优化）**：
   - 添加参数调整的即时反馈（高亮受影响的行程项）
   - 添加参数预设（快速选择常用配置）
   - 优化移动端显示（在小屏幕上自动折叠）

3. **Phase 3（高级功能）**：
   - 添加参数对比功能（同时显示多个参数组合的效果）
   - 添加参数历史记录（可以回退到之前的参数配置）

### 4.3 实施注意事项

1. **响应式设计**：
   - 桌面端：顶部工具栏，全宽显示
   - 平板端：顶部工具栏，可折叠
   - 移动端：默认折叠，点击展开为全屏模态框

2. **视觉层次**：
   - 调参面板应该有明确的视觉边界（卡片样式）
   - 与内容区域有适当的间距
   - 折叠状态应该有清晰的指示器

3. **交互优化**：
   - 参数调整后，自动高亮受影响的行程项
   - 提供"重置"按钮，快速恢复默认参数
   - 提供"应用"按钮，明确的操作反馈

---

## ✅ 五、结论

**当前问题**：
- ❌ 调参面板与内容区域视觉分离
- ❌ 在小屏幕上可能不可见
- ❌ 参数调整缺乏即时反馈

**推荐方案**：
- ✅ 将调参面板移到顶部（KPI卡片下方）
- ✅ 添加折叠/展开功能
- ✅ 添加参数调整的即时反馈

**预期效果**：
- 📈 减少用户的视觉搜索负担
- 📈 提高参数调整的可发现性
- 📈 改善整体的用户体验

---

**评估完成时间**：2026-02-09  
**下一步行动**：根据评估结果实施布局调整
