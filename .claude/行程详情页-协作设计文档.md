# 行程详情页 - 协作设计文档

## 文档信息

- **创建日期**: 2026-02-05
- **版本**: v3.0
- **状态**: 设计进行中
- **设计团队**: 
  - 人机交互设计专家（HCI）
  - 体验设计师（UX）
  - 视觉设计师（Visual）

---

## 设计流程

```
产品需求文档（PRD）
    ↓
[HCI专家] 交互设计 → 信息架构、交互流程、交互模式
    ↓
[UX设计师] 体验设计 → 用户旅程、体验优化、情感设计
    ↓
[视觉设计师] 视觉设计 → 视觉系统、组件设计、视觉规范
    ↓
设计评审 → 开发实施
```

---

# 第一部分：HCI专家 - 交互设计

## 一、信息架构设计

### 1.1 页面信息架构

```
行程详情页（Trip Detail Page）
│
├── 头部区域（Header Zone）
│   ├── 导航栏（Navigation Bar）
│   │   ├── 返回按钮
│   │   ├── 行程名称
│   │   ├── 行程状态徽章（规划中/进行中/已完成/已取消）
│   │   └── 用户菜单
│   │
│   ├── 行程信息栏（Trip Info Bar）
│   │   ├── 日期范围（2026-02-18 - 2026-02-22）
│   │   ├── 节奏标签（标准节奏）
│   │   ├── 交通方式（自驾）
│   │   └── 天气信息（-1°C，风速）
│   │
│   └── 操作栏（Action Bar）
│       ├── 编辑按钮
│       ├── 分享按钮
│       ├── 协作按钮
│       └── 更多操作（下拉菜单）
│
├── 健康度区域（Health Zone）
│   ├── 整体健康度（79%）
│   │   ├── 大号数字显示
│   │   ├── 颜色编码（绿色/黄色/红色）
│   │   └── 进度条可视化
│   │
│   ├── 维度指标（4个）
│   │   ├── 可执行度（85%）[可点击]
│   │   ├── 缓冲（70%）[可点击]
│   │   ├── 风险（25%）[可点击]
│   │   └── 成本（80%）[可点击]
│   │
│   └── 快速操作
│       ├── Auto综合按钮
│       └── 进入规划工作台按钮
│
├── 建议横幅（Suggestion Banner）[条件显示]
│   ├── 建议数量提示
│   └── 查看建议按钮
│
├── 主内容区域（Main Content Zone）
│   ├── Tab导航（Tabs）
│   │   ├── 总览（Overview）[默认]
│   │   ├── 规划（Planning）[PLANNING状态]
│   │   ├── 执行（Execute）[IN_PROGRESS/COMPLETED状态]
│   │   └── 复盘（Review）[COMPLETED状态]
│   │
│   └── Tab内容（Tab Content）
│       ├── 总览Tab
│       │   └── 每日行程卡片列表
│       │       ├── Day 1 卡片
│       │       ├── Day 2 卡片
│       │       └── ...
│       │
│       ├── 规划Tab
│       │   └── 规划工作台嵌入视图
│       │
│       ├── 执行Tab
│       │   └── 执行记录和实时状态
│       │
│       └── 复盘Tab
│           └── 复盘报告和分析
│
└── 侧边栏（Sidebar Zone）
    ├── 健康度详情（Health Details）
    │   ├── 标题："理解与掌控旅行现状"
    │   ├── 整体健康度（79%）
    │   ├── 4个维度指标详细展示
    │   │   ├── 可执行度（85%）
    │   │   │   ├── 进度条
    │   │   │   ├── 数值显示
    │   │   │   └── [点击查看详细说明]链接
    │   │   ├── 缓冲（70%）
    │   │   ├── 风险（25%）
    │   │   └── 成本（80%）
    │   └── 指标说明弹窗触发器
    │
    ├── 预算概览（Budget Overview）
    │   ├── 总预算
    │   ├── 已支出
    │   ├── 剩余预算
    │   └── 预算进度条
    │
    └── 助手中心（Assistant Center）
        ├── 标题："助手中心"
        ├── 副标题："三人格的建议与提醒"
        ├── Tab筛选
        │   ├── 全部（All）
        │   ├── 风险（Abu）
        │   ├── 节奏（Dr.Dre）
        │   └── 修复（Neptune）
        └── 建议卡片列表
            ├── 建议卡片1
            │   ├── 标题（优化后的自然语言）
            │   ├── 严重程度徽章
            │   ├── 范围标签（Day 1）
            │   ├── 描述文本
            │   └── 操作按钮（应用建议、查看详情）
            └── 建议卡片2...
```

### 1.2 信息层次优先级

**第一优先级（P0 - 必须展示）**：
1. 统一健康度（头部 + 侧边栏一致）
2. 改进建议（如有）
3. 每日行程概览
4. 快速操作入口（Auto综合、规划工作台）

**第二优先级（P1 - 重要展示）**：
1. 指标详细说明（可点击查看）
2. 预算概览
3. 每日健康度

**第三优先级（P2 - 可选展示）**：
1. 健康度历史趋势
2. 地图视图
3. 时间轴视图

---

## 二、交互流程设计

### 2.1 核心交互流程

#### 流程1：查看健康度详情

```
用户操作路径：
1. 用户进入行程详情页
   ↓
2. 用户看到健康度区域（头部或侧边栏）
   ↓
3. 用户点击某个指标（如"可执行度85%"）
   ↓
4. 系统显示详细说明弹窗
   ├── 指标定义
   ├── 计算方法
   ├── 理想范围
   ├── 当前状态分析
   └── [关闭]按钮
   ↓
5. 用户阅读说明后点击关闭
   ↓
6. 弹窗关闭，返回详情页
```

**交互细节**：
- 点击指标时，指标高亮显示（视觉反馈）
- 弹窗从点击位置附近出现（或居中显示）
- 弹窗支持ESC键关闭
- 弹窗外部点击关闭（可选）

#### 流程2：应用改进建议

```
用户操作路径：
1. 用户在助手中心看到建议
   ↓
2. 用户点击"应用建议"按钮
   ↓
3. 系统显示确认弹窗
   ├── 标题："应用建议：时间冲突修复"
   ├── 变更预览：
   │   ├── 可执行度：85% → 90% (+5%)
   │   └── 调整 Day 1 的行程项A和B的时间
   ├── 变更详情：
   │   ├── 行程项A：10:00 → 10:30
   │   └── 行程项B：14:00 → 14:30
   ├── [取消]按钮
   └── [确认应用]按钮（主要操作）
   ↓
4. 用户点击"确认应用"
   ↓
5. 系统显示加载状态（按钮显示"应用中..."）
   ↓
6. 系统调用后端接口
   ↓
7. 系统显示成功提示（Toast）
   ├── 标题："✅ 建议已应用"
   ├── 变更摘要：
   │   ├── 可执行度已提升至90%
   │   └── 已调整2个行程项的时间
   └── [查看详情]链接（可选）
   ↓
8. 系统刷新健康度数据
   ↓
9. 系统更新建议列表（移除已应用的建议）
```

**交互细节**：
- 确认弹窗必须明确显示变更内容
- 加载状态必须清晰可见
- 成功提示必须明确且持久（至少3秒）
- 错误处理：如果应用失败，显示错误提示，允许重试

#### 流程3：Auto综合优化

```
用户操作路径：
1. 用户看到"Auto 综合"按钮（健康度区域）
   ↓
2. 用户点击"Auto 综合"按钮
   ↓
3. 系统显示确认弹窗
   ├── 标题："Auto 综合优化"
   ├── 将应用的建议列表：
   │   ├── • 时间冲突修复（Day 1）
   │   ├── • 节奏优化（Day 2）
   │   └── • 缓冲时间增加（Day 3）
   ├── 预期改善：
   │   ├── 整体健康度：79% → 85% (+6%)
   │   ├── 可执行度：85% → 90% (+5%)
   │   └── 缓冲：70% → 75% (+5%)
   ├── [取消]按钮
   └── [确认优化]按钮（主要操作）
   ↓
4. 用户点击"确认优化"
   ↓
5. 系统显示加载状态（全屏加载或进度条）
   ↓
6. 系统调用后端接口（可能需要较长时间）
   ↓
7. 系统显示优化结果弹窗
   ├── 标题："✅ 优化完成"
   ├── 优化结果：
   │   ├── 整体健康度：79% → 85% (+6%)
   │   ├── 可执行度：85% → 90% (+5%)
   │   ├── 缓冲：70% → 75% (+5%)
   │   └── 风险：25% → 20% (-5%)
   ├── 应用的建议列表：
   │   ├── ✅ 时间冲突修复（Day 1）
   │   ├── ✅ 节奏优化（Day 2）
   │   └── ✅ 缓冲时间增加（Day 3）
   ├── [查看详情]按钮
   └── [关闭]按钮
   ↓
8. 系统刷新页面数据
   ↓
9. 系统更新健康度显示
```

**交互细节**：
- Auto综合操作可能需要较长时间（5-10秒），需要明确的加载反馈
- 优化结果必须清晰展示，让用户理解发生了什么
- 支持查看优化详情（跳转到变更日志）

### 2.2 状态相关的交互流程

#### 规划中（PLANNING）状态

**核心交互**：
- ✅ 健康度展示和优化
- ✅ 改进建议查看和应用
- ✅ 每日行程编辑
- ✅ 进入规划工作台

**限制交互**：
- ❌ 不显示"执行"标签页
- ❌ 不显示"复盘"标签页

#### 进行中（IN_PROGRESS）状态

**核心交互**：
- ✅ 实时状态展示
- ✅ 执行记录
- ✅ 应急调整
- ✅ 健康度变化趋势

**限制交互**：
- ✅ 显示"执行"标签页
- ❌ 不显示"复盘"标签页
- ❌ 不支持Auto综合优化（可选）

#### 已完成（COMPLETED）状态

**核心交互**：
- ✅ 复盘报告查看
- ✅ 数据分析
- ✅ 经验沉淀

**限制交互**：
- ✅ 显示"执行"标签页
- ✅ 显示"复盘"标签页
- ❌ 不支持编辑（只读模式）
- ❌ 不支持Auto综合优化

#### 已取消（CANCELLED）状态

**核心交互**：
- ✅ 历史记录查看
- ✅ 取消原因查看

**限制交互**：
- ❌ 所有编辑功能禁用（完全只读）
- ❌ 不支持任何优化操作
- ❌ 不显示健康度优化相关功能

---

## 三、交互模式设计

### 3.1 导航模式

**页面导航**：
- 返回按钮：返回上一页（行程列表）
- Tab导航：在同一页面内切换不同视图
- 侧边栏：固定显示，支持滚动

**Tab导航规则**：
- 默认显示"总览"Tab
- PLANNING状态：显示"总览"、"规划"、"预算"
- IN_PROGRESS状态：显示"总览"、"执行"、"预算"
- COMPLETED状态：显示"总览"、"执行"、"复盘"、"预算"
- CANCELLED状态：只显示"总览"（只读）

### 3.2 反馈模式

**操作反馈**：
- **即时反馈**：按钮点击 → 按钮状态变化（hover、active）
- **加载反馈**：异步操作 → 加载指示器（Spinner、进度条）
- **成功反馈**：操作成功 → Toast提示（3-5秒）
- **错误反馈**：操作失败 → 错误提示（Toast或弹窗）

**视觉反馈层次**：
1. **微反馈**：按钮hover、点击效果
2. **中反馈**：加载状态、进度指示
3. **强反馈**：成功/错误提示、弹窗

### 3.3 确认模式

**需要确认的操作**：
- 应用建议（单个）
- Auto综合优化
- 状态转换（PLANNING → IN_PROGRESS等）
- 删除行程

**确认弹窗设计**：
- 必须明确说明操作的影响
- 必须提供"取消"和"确认"两个选项
- 确认按钮使用主要颜色（Primary）
- 取消按钮使用次要样式（Secondary）

---

# 第二部分：UX设计师 - 体验设计

## 一、用户旅程设计

### 1.1 规划中状态的用户旅程

```
阶段1：进入页面
├── 用户目标：了解行程健康状态
├── 用户行为：打开行程详情页
├── 系统反馈：显示健康度（79%）、4个维度指标
└── 用户感受：快速了解整体状态 ✅

阶段2：理解健康度
├── 用户目标：理解为什么是79%，如何改进
├── 用户行为：点击指标查看详细说明
├── 系统反馈：显示详细说明弹窗（定义、计算方法、当前状态）
└── 用户感受：理解了指标含义，知道如何改进 ✅

阶段3：查看改进建议
├── 用户目标：找到可以改进的地方
├── 用户行为：查看助手中心的建议列表
├── 系统反馈：显示建议卡片（按人格分类、显示严重程度）
└── 用户感受：找到了需要改进的问题 ✅

阶段4：应用建议
├── 用户目标：快速优化行程
├── 用户行为：点击"应用建议"或"Auto综合"
├── 系统反馈：显示确认弹窗 → 执行优化 → 显示结果
└── 用户感受：行程得到优化，健康度提升 ✅

阶段5：查看优化结果
├── 用户目标：确认优化效果
├── 用户行为：查看更新后的健康度
├── 系统反馈：健康度从79%提升到85%
└── 用户感受：看到明显的改善，满意 ✅
```

### 1.2 进行中状态的用户旅程

```
阶段1：进入页面
├── 用户目标：查看当前行程状态
├── 用户行为：打开行程详情页
├── 系统反馈：显示"执行"标签页、当前日期、当前行程项
└── 用户感受：快速了解当前状态 ✅

阶段2：查看下一步安排
├── 用户目标：知道接下来要做什么
├── 用户行为：查看"执行"标签页的行程安排
├── 系统反馈：显示今日行程、下一步行程项
└── 用户感受：清楚知道下一步安排 ✅

阶段3：记录执行情况
├── 用户目标：记录实际执行情况
├── 用户行为：标记行程项为"已完成"、调整时间
├── 系统反馈：更新执行记录、更新健康度
└── 用户感受：行程记录准确，有成就感 ✅

阶段4：应对突发情况
├── 用户目标：处理突发情况（如天气变化、交通延误）
├── 用户行为：查看应急建议、调整后续行程
├── 系统反馈：显示应急建议、支持快速调整
└── 用户感受：能够灵活应对，不焦虑 ✅
```

### 1.3 已完成状态的用户旅程

```
阶段1：进入页面
├── 用户目标：回顾行程
├── 用户行为：打开行程详情页
├── 系统反馈：显示"复盘"标签页、复盘报告
└── 用户感受：快速进入复盘状态 ✅

阶段2：查看复盘报告
├── 用户目标：了解行程执行情况
├── 用户行为：阅读复盘报告
├── 系统反馈：显示行程总结、执行统计、健康度分析
└── 用户感受：全面了解行程情况 ✅

阶段3：分析经验教训
├── 用户目标：总结经验，为未来规划提供参考
├── 用户行为：查看数据分析、添加笔记
├── 系统反馈：显示详细分析、支持添加笔记
└── 用户感受：有收获，对未来有帮助 ✅
```

---

## 二、情感设计

### 2.1 情感目标

**规划中状态**：
- **主要情感**：信心、掌控感
- **次要情感**：期待、兴奋
- **避免情感**：焦虑、困惑

**进行中状态**：
- **主要情感**：安心、自信
- **次要情感**：兴奋、满足
- **避免情感**：紧张、慌乱

**已完成状态**：
- **主要情感**：满足、成就感
- **次要情感**：回忆、怀念
- **避免情感**：遗憾、后悔

**已取消状态**：
- **主要情感**：理解、接受
- **次要情感**：反思、学习
- **避免情感**：沮丧、失望

### 2.2 情感化设计元素

#### 健康度展示

**优秀（≥80%）**：
- 颜色：绿色（积极、健康）
- 图标：✅ 或 🎉
- 文案："行程很健康！"、"可以放心出发"
- 情感：信心、安心

**警告（60-79%）**：
- 颜色：黄色（注意、提醒）
- 图标：⚠️ 或 💡
- 文案："行程基本可行，建议优化"、"还有改进空间"
- 情感：提醒但不焦虑

**危险（<60%）**：
- 颜色：红色（警告、危险）
- 图标：🚨 或 ⚠️
- 文案："行程需要优化"、"建议查看改进建议"
- 情感：警示但不恐慌

#### 改进建议

**红线（blocker）**：
- 颜色：红色（紧急）
- 图标：🚨
- 文案："必须处理"、"严重问题"
- 情感：紧迫但不恐慌

**警告（warn）**：
- 颜色：黄色（注意）
- 图标：⚠️
- 文案："建议处理"、"需要注意"
- 情感：提醒但不焦虑

**提示（info）**：
- 颜色：蓝色（信息）
- 图标：💡
- 文案："可以优化"、"建议考虑"
- 情感：建议但不强制

---

## 三、体验优化

### 3.1 加载体验优化

**策略**：
- 骨架屏（Skeleton Screen）：显示页面结构，减少感知等待时间
- 渐进式加载：先显示关键信息，再加载次要信息
- 乐观更新：操作后立即更新UI，后台同步数据

**实现**：
```
页面加载流程：
1. 显示骨架屏（0-500ms）
   ↓
2. 加载行程基本信息（500ms-1s）
   ↓
3. 显示行程基本信息（名称、日期、状态）
   ↓
4. 加载健康度数据（1s-1.5s）
   ↓
5. 显示健康度（79%）
   ↓
6. 加载每日行程数据（1.5s-2s）
   ↓
7. 显示每日行程卡片
   ↓
8. 加载建议数据（2s-2.5s）
   ↓
9. 显示建议列表
```

### 3.2 错误处理体验

**错误类型和处理**：

1. **网络错误**：
   - 显示友好提示："网络连接失败，请检查网络"
   - 提供重试按钮
   - 支持离线缓存（可选）

2. **数据加载失败**：
   - 显示友好提示："数据加载失败，请稍后重试"
   - 提供重试按钮
   - 保留上次成功加载的数据（可选）

3. **操作失败**：
   - 显示具体错误原因："应用建议失败：网络超时"
   - 提供重试按钮
   - 支持撤销操作（可选）

### 3.3 空状态体验

**空状态场景**：

1. **无建议**：
   - 图标：✅ 或 🎉
   - 标题："当前行程很健康"
   - 描述："暂无需要处理的建议"
   - 情感：积极、鼓励

2. **无行程项**：
   - 图标：📍 或 ➕
   - 标题："暂无行程项"
   - 描述："一个行程项可以是景点、美食、住宿或交通。试着添加第一站吧！"
   - 操作：添加行程项按钮
   - 情感：引导、鼓励

3. **加载中**：
   - 显示加载指示器
   - 显示加载文案："正在加载..."
   - 情感：耐心、等待

---

# 第三部分：视觉设计师 - 视觉设计

## 一、视觉系统设计

### 1.1 颜色系统

#### 主色调

**健康度颜色编码**：
```
优秀（≥80%）：
- 主色：#10b981 (green-500)
- 背景：#ecfdf5 (green-50)
- 文字：#065f46 (green-800)
- 边框：#6ee7b7 (green-300)

警告（60-79%）：
- 主色：#f59e0b (amber-500)
- 背景：#fffbeb (amber-50)
- 文字：#92400e (amber-800)
- 边框：#fcd34d (amber-300)

危险（<60%）：
- 主色：#ef4444 (red-500)
- 背景：#fef2f2 (red-50)
- 文字：#991b1b (red-800)
- 边框：#fca5a5 (red-300)
```

**建议严重程度颜色**：
```
红线（blocker）：
- 背景：#fef2f2 (red-50)
- 文字：#991b1b (red-800)
- 边框：#fca5a5 (red-300)

警告（warn）：
- 背景：#fffbeb (amber-50)
- 文字：#92400e (amber-800)
- 边框：#fcd34d (amber-300)

提示（info）：
- 背景：#eff6ff (blue-50)
- 文字：#1e40af (blue-800)
- 边框：#93c5fd (blue-300)
```

**状态颜色**：
```
规划中（PLANNING）：
- 主色：#3b82f6 (blue-500)
- 背景：#dbeafe (blue-100)
- 文字：#1e40af (blue-800)

进行中（IN_PROGRESS）：
- 主色：#10b981 (green-500)
- 背景：#d1fae5 (green-100)
- 文字：#065f46 (green-800)

已完成（COMPLETED）：
- 主色：#6b7280 (gray-500)
- 背景：#f3f4f6 (gray-100)
- 文字：#374151 (gray-800)

已取消（CANCELLED）：
- 主色：#ef4444 (red-500)
- 背景：#fee2e2 (red-100)
- 文字：#991b1b (red-800)
```

### 1.2 字体系统

**字体层级**：
```
H1 - 页面主标题：
- 字体大小：2xl (24px)
- 字重：bold (700)
- 行高：1.2
- 使用场景：行程名称

H2 - 区块标题：
- 字体大小：xl (20px)
- 字重：semibold (600)
- 行高：1.3
- 使用场景：健康度标题、助手中心标题

H3 - 卡片标题：
- 字体大小：lg (18px)
- 字重：semibold (600)
- 行高：1.4
- 使用场景：每日行程卡片标题

Body - 正文：
- 字体大小：sm (14px)
- 字重：normal (400)
- 行高：1.5
- 使用场景：描述文本、建议内容

Caption - 辅助信息：
- 字体大小：xs (12px)
- 字重：normal (400)
- 行高：1.4
- 使用场景：日期、标签、辅助说明

数字 - 健康度：
- 整体健康度：3xl (30px)，bold (700)
- 维度指标：sm (14px)，semibold (600)
```

### 1.3 间距系统

**间距规范**：
```
页面边距：
- 移动端：px-4 (16px)
- 平板端：px-6 (24px)
- 桌面端：px-8 (32px)

区块间距：
- 小间距：space-y-2 (8px) - 相关元素
- 中间距：space-y-4 (16px) - 不同区块
- 大间距：space-y-6 (24px) - 主要区块

卡片内边距：
- 标准：p-4 (16px)
- 紧凑：p-3 (12px)
- 宽松：p-6 (24px)

元素间距：
- 紧密：gap-1 (4px) - 图标和文字
- 标准：gap-2 (8px) - 按钮组
- 宽松：gap-4 (16px) - 卡片组
```

### 1.4 圆角系统

**圆角规范**：
```
卡片：rounded-lg (8px)
按钮：rounded-md (6px)
徽章：rounded-full (完全圆形)
输入框：rounded-md (6px)
弹窗：rounded-xl (12px)
```

### 1.5 阴影系统

**阴影规范**：
```
卡片默认：shadow-sm
卡片悬停：shadow-md
弹窗：shadow-xl
下拉菜单：shadow-lg
```

---

## 二、组件设计规范

### 2.1 健康度卡片设计

**整体健康度展示**：
```
┌─────────────────────────────────────────┐
│ 健康度 79%                    [Auto综合] │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│ ████████████████░░░░░░░░░░░░░░░░░░░░░░ │
│ 0%                          100%        │
│                                         │
│ ✅可执行度85%  ⚠️缓冲70%  ⚠️风险25%  ✅成本80% │
└─────────────────────────────────────────┘

设计规范：
- 背景：白色 (bg-white)
- 边框：border border-gray-200
- 内边距：p-4 (16px)
- 圆角：rounded-lg (8px)
- 阴影：shadow-sm hover:shadow-md
- 整体健康度数字：text-3xl font-bold
- 进度条：h-2.5 (10px)，渐变背景
- 维度指标：grid grid-cols-4 gap-2
```

**侧边栏健康度详情**：
```
┌─────────────────────────┐
│ 理解与掌控旅行现状       │
│                         │
│ 健康度 79%              │
│ ━━━━━━━━━━━━━━━━━━━━━ │
│ ████████████████░░░░░░ │
│                         │
│ ✅ 可执行度 85%         │
│ ████████░░ 85/100      │
│ [点击查看详细说明]       │
│                         │
│ ⚠️ 缓冲 70%             │
│ ███████░░░ 70/100      │
│ [点击查看详细说明]       │
│                         │
│ ⚠️ 风险 25%             │
│ ██░░░░░░░░ 25/100      │
│ [点击查看详细说明]       │
│                         │
│ ✅ 成本 80%             │
│ ████████░░ 80/100      │
│ [点击查看详细说明]       │
└─────────────────────────┘

设计规范：
- 背景：白色 (bg-white)
- 边框：border border-gray-200
- 内边距：p-4 (16px)
- 圆角：rounded-lg (8px)
- 阴影：shadow-sm
- 指标项：space-y-3 (12px)
- 进度条：h-2 (8px)，根据分数显示不同颜色
- 链接：text-sm text-primary hover:underline
```

### 2.2 建议卡片设计

**建议卡片**：
```
┌─────────────────────────────────────┐
│ 🚨 时间冲突                          │
│ [红线] [Day 1]                      │
│                                     │
│ Day 1的行程项A和B时间重叠，可能...  │
│                                     │
│ [应用建议] [查看详情]                │
└─────────────────────────────────────┘

设计规范：
- 背景：根据严重程度（红色/黄色/蓝色）
- 边框：border rounded-lg
- 内边距：p-4 (16px)
- 阴影：shadow-sm hover:shadow-md
- 标题：text-sm font-semibold
- 描述：text-sm text-gray-700 leading-relaxed
- 按钮组：flex gap-2 pt-2 border-t
```

### 2.3 每日行程卡片设计

**每日行程卡片**：
```
┌─────────────────────────────────────┐
│ Day 1  2026.02.18                   │
│ 南岸 → Landmannalaugar              │
│ 共3个行程项                         │
│                                     │
│ 当日预算 ¥0/¥300                    │
│ ████████░░░░░░░░░░ 0%              │
│                                     │
│ [→ 查看行程]                        │
└─────────────────────────────────────┘

设计规范：
- 背景：白色 (bg-white)
- 边框：border-l-4 border-l-primary
- 内边距：p-4 (16px)
- 圆角：rounded-lg (8px)
- 阴影：shadow-sm hover:shadow-md
- 标题：text-2xl font-bold
- 日期：text-sm text-muted-foreground
- 预算进度条：h-1.5 (6px)
```

### 2.4 按钮设计

**主要按钮（Primary）**：
```
[Auto 综合]

设计规范：
- 背景：bg-primary (蓝色)
- 文字：text-primary-foreground (白色)
- 内边距：px-4 py-2
- 圆角：rounded-md (6px)
- 悬停：hover:bg-primary/90
- 字体：text-sm font-medium
```

**次要按钮（Secondary）**：
```
[取消]

设计规范：
- 背景：bg-secondary (灰色)
- 文字：text-secondary-foreground
- 边框：border border-gray-200
- 内边距：px-4 py-2
- 圆角：rounded-md (6px)
- 悬停：hover:bg-gray-50
- 字体：text-sm font-medium
```

**危险按钮（Destructive）**：
```
[删除行程]

设计规范：
- 背景：bg-destructive (红色)
- 文字：text-destructive-foreground (白色)
- 内边距：px-4 py-2
- 圆角：rounded-md (6px)
- 悬停：hover:bg-destructive/90
- 字体：text-sm font-medium
```

---

## 三、响应式设计

### 3.1 断点定义

```
移动端：< 768px
平板端：768px - 1023px
桌面端：≥ 1024px
```

### 3.2 布局适配

**桌面端（≥1024px）**：
```
┌─────────────────────────────────────────────────────┐
│ Header (全宽)                                        │
├─────────────────────────────────────────────────────┤
│ Health Bar (全宽)                                    │
├──────────────────────────┬──────────────────────────┤
│                          │                          │
│ Main Content (2/3)      │ Sidebar (1/3)            │
│                          │                          │
│ - Tabs                   │ - Health Details        │
│ - Daily Cards            │ - Budget Overview       │
│                          │ - Assistant Center       │
│                          │                          │
└──────────────────────────┴──────────────────────────┘
```

**平板端（768px-1023px）**：
```
┌─────────────────────────────────────┐
│ Header (全宽)                       │
├─────────────────────────────────────┤
│ Health Bar (全宽)                   │
├─────────────────────────────────────┤
│ Main Content (全宽)                 │
│ - Tabs                              │
│ - Daily Cards                       │
├─────────────────────────────────────┤
│ Sidebar (可收起)                    │
│ - Health Details                    │
│ - Budget Overview                   │
│ - Assistant Center                  │
└─────────────────────────────────────┘
```

**移动端（<768px）**：
```
┌─────────────────────┐
│ Header (全宽)        │
├─────────────────────┤
│ Health Bar (全宽)    │
├─────────────────────┤
│ Main Content (全宽)  │
│ - Tabs              │
│ - Daily Cards       │
├─────────────────────┤
│ Sidebar (抽屉)       │
│ [点击展开]           │
└─────────────────────┘
```

---

## 四、视觉规范总结

### 4.1 设计Token

**颜色Token**：
- `health-excellent`: #10b981
- `health-warning`: #f59e0b
- `health-danger`: #ef4444
- `suggestion-blocker`: #fef2f2
- `suggestion-warn`: #fffbeb
- `suggestion-info`: #eff6ff

**间距Token**：
- `spacing-xs`: 4px
- `spacing-sm`: 8px
- `spacing-md`: 16px
- `spacing-lg`: 24px
- `spacing-xl`: 32px

**圆角Token**：
- `radius-sm`: 4px
- `radius-md`: 6px
- `radius-lg`: 8px
- `radius-xl`: 12px

### 4.2 组件库映射

**使用现有组件库**：
- Card: `@/components/ui/card`
- Button: `@/components/ui/button`
- Badge: `@/components/ui/badge`
- Tabs: `@/components/ui/tabs`
- Dialog: `@/components/ui/dialog`
- Toast: `@/components/ui/sonner`

**自定义组件**：
- HealthBar: `@/components/trips/HealthBar`
- DayItineraryCard: `@/components/trips/DayItineraryCard`
- AssistantCenter: `@/components/trips/AssistantCenter`

---

## 五、设计交付物

### 5.1 设计文件清单

1. **设计稿**（Figma/Sketch）
   - 桌面端设计稿（1920px）
   - 平板端设计稿（1024px）
   - 移动端设计稿（375px）

2. **交互原型**（Figma/Sketch）
   - 健康度详情弹窗交互
   - 应用建议流程交互
   - Auto综合优化流程交互

3. **设计规范文档**（本文档）
   - 颜色系统
   - 字体系统
   - 间距系统
   - 组件规范

4. **切图资源**
   - 图标（SVG）
   - 图片（PNG/WebP）
   - 插画（SVG/PNG）

### 5.2 开发对接清单

- [ ] 设计稿评审完成
- [ ] 交互原型评审完成
- [ ] 设计规范文档完成
- [ ] 切图资源交付完成
- [ ] 开发团队评审完成
- [ ] 设计Token定义完成
- [ ] 组件库映射完成

---

## 六、设计评审

### 6.1 评审要点

1. **信息一致性**：健康度展示是否统一？
2. **信息层次**：关键信息是否突出？
3. **操作路径**：用户操作是否顺畅？
4. **视觉设计**：是否符合设计规范？
5. **响应式**：各设备端是否适配？
6. **无障碍**：是否支持无障碍访问？

### 6.2 评审流程

1. **内部评审**：HCI/UX/视觉设计师内部评审
2. **产品评审**：产品经理评审
3. **开发评审**：前端开发工程师评审
4. **用户测试**：小范围用户测试（可选）

---

**文档状态**: ✅ 设计完成  
**下一步**: 
1. 设计评审会议
2. 开发对接
3. 开始实施
