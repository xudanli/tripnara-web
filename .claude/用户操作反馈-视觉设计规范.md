# 用户操作反馈 - 视觉设计规范

> 设计时间：2026-02-05  
> 设计范围：Toast 通知、页面内反馈、按钮状态

## 一、设计原则

### 1.1 TripNARA 视觉原则

基于 **"决策感（Decision-first）"** 和 **"可靠感（Trustworthy）"** 的视觉原则：

- **Clarity over Charm（清晰优先于讨喜）**：反馈必须清晰、明确，不追求装饰性
- **Evidence is the aesthetic（证据就是美学）**：反馈信息结构化，来源清晰
- **Decision is a UI primitive（决策是 UI 原语）**：反馈状态像系统级 UI 元素，贯穿全产品
- **Quiet confidence（安静的自信）**：高级感来自比例、留白、层级，而非炫技

### 1.2 反馈设计原则

- **及时性**：< 100ms 即时反馈，< 1s 视觉反馈
- **清晰性**：用户能明确理解操作结果
- **一致性**：相同操作有相同反馈方式
- **不干扰**：不影响用户继续操作

## 二、Toast 通知视觉规范

### 2.1 基础样式

**位置**：
- 桌面端：右上角，距离顶部 24px，距离右侧 24px
- 移动端：顶部居中，距离顶部 16px，左右边距 16px

**尺寸**：
- 最小宽度：320px（桌面端），280px（移动端）
- 最大宽度：420px（桌面端），calc(100% - 32px)（移动端）
- 内边距：16px（桌面端），14px（移动端）

**圆角**：8px

**阴影**：
```css
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 0 1px rgba(0, 0, 0, 0.1);
```

**背景**：
- 浅色模式：`#FFFFFF`
- 深色模式：`#1F2937`

**边框**：
- 浅色模式：`1px solid rgba(0, 0, 0, 0.1)`
- 深色模式：`1px solid rgba(255, 255, 255, 0.1)`

### 2.2 成功 Toast（Success）

**颜色规范**：
- **主色**：`#10B981`（绿色-500）
- **背景**：`#ECFDF5`（绿色-50）
- **边框**：`#6EE7B7`（绿色-300）
- **图标**：`CheckCircle`（lucide-react），颜色 `#10B981`
- **文字**：主文字 `#065F46`（绿色-900），描述文字 `#047857`（绿色-800）

**图标尺寸**：20px × 20px

**示例**：
```
┌─────────────────────────────────┐
│ ✓  操作成功                      │
│    详细说明信息                  │
└─────────────────────────────────┘
```

### 2.3 错误 Toast（Error）

**颜色规范**：
- **主色**：`#EF4444`（红色-500）
- **背景**：`#FEF2F2`（红色-50）
- **边框**：`#FCA5A5`（红色-300）
- **图标**：`AlertCircle`（lucide-react），颜色 `#EF4444`
- **文字**：主文字 `#991B1B`（红色-900），描述文字 `#B91C1C`（红色-800）

**图标尺寸**：20px × 20px

**示例**：
```
┌─────────────────────────────────┐
│ ⚠  操作失败                      │
│    错误详情信息                  │
└─────────────────────────────────┘
```

### 2.4 信息 Toast（Info）

**颜色规范**：
- **主色**：`#3B82F6`（蓝色-500）
- **背景**：`#EFF6FF`（蓝色-50）
- **边框**：`#93C5FD`（蓝色-300）
- **图标**：`Info`（lucide-react），颜色 `#3B82F6`
- **文字**：主文字 `#1E3A8A`（蓝色-900），描述文字 `#1E40AF`（蓝色-800）

**图标尺寸**：20px × 20px

### 2.5 警告 Toast（Warning）

**颜色规范**：
- **主色**：`#F59E0B`（黄色-500）
- **背景**：`#FFFBEB`（黄色-50）
- **边框**：`#FCD34D`（黄色-300）
- **图标**：`AlertTriangle`（lucide-react），颜色 `#F59E0B`
- **文字**：主文字 `#92400E`（黄色-900），描述文字 `#B45309`（黄色-800）

**图标尺寸**：20px × 20px

### 2.6 动画规范

**入场动画**：
- 持续时间：300ms
- 缓动函数：`cubic-bezier(0.16, 1, 0.3, 1)`
- 效果：从右侧滑入（桌面端）或从顶部滑入（移动端）+ 淡入

**退场动画**：
- 持续时间：200ms
- 缓动函数：`cubic-bezier(0.16, 1, 0.3, 1)`
- 效果：淡出 + 向上移动

**堆叠动画**：
- 多个 Toast 堆叠时，新 Toast 推入，旧 Toast 向上移动
- 移动距离：Toast 高度 + 8px 间距

## 三、页面内反馈视觉规范

### 3.1 成功卡片（Success Card）

**位置**：表单顶部或操作区域附近

**样式**：
- **背景**：`#ECFDF5`（绿色-50）
- **边框**：`2px solid #6EE7B7`（绿色-300）
- **圆角**：8px
- **内边距**：16px
- **图标**：`CheckCircle`，颜色 `#10B981`，尺寸 20px
- **文字**：主文字 `#065F46`（绿色-900），描述文字 `#047857`（绿色-800）

**布局**：
```
┌─────────────────────────────────┐
│ ✓  操作成功                      │
│    详细说明信息                  │
│    [关闭按钮]                    │
└─────────────────────────────────┘
```

### 3.2 错误卡片（Error Card）

**位置**：表单顶部或操作区域附近

**样式**：
- **背景**：`#FEF2F2`（红色-50）
- **边框**：`2px solid #FCA5A5`（红色-300）
- **圆角**：8px
- **内边距**：16px
- **图标**：`AlertCircle`，颜色 `#EF4444`，尺寸 20px
- **文字**：主文字 `#991B1B`（红色-900），描述文字 `#B91C1C`（红色-800）

**布局**：
```
┌─────────────────────────────────┐
│ ⚠  操作失败                      │
│    错误详情信息                  │
│    [关闭按钮]                    │
└─────────────────────────────────┘
```

### 3.3 信息卡片（Info Card）

**样式**：
- **背景**：`#EFF6FF`（蓝色-50）
- **边框**：`2px solid #93C5FD`（蓝色-300）
- **圆角**：8px
- **内边距**：16px
- **图标**：`Info`，颜色 `#3B82F6`，尺寸 20px
- **文字**：主文字 `#1E3A8A`（蓝色-900），描述文字 `#1E40AF`（蓝色-800）

## 四、按钮状态视觉规范

### 4.1 默认状态

**样式**：
- **背景**：主色（如 `#3B82F6`）
- **文字**：白色
- **圆角**：6px
- **内边距**：12px 24px（桌面端），10px 20px（移动端）
- **阴影**：`0 1px 2px rgba(0, 0, 0, 0.05)`

### 4.2 Hover 状态

**样式**：
- **背景**：主色加深 10%（如 `#2563EB`）
- **阴影**：`0 2px 4px rgba(0, 0, 0, 0.1)`
- **过渡**：150ms ease-in-out

### 4.3 Loading 状态

**样式**：
- **背景**：主色（不变）
- **文字**：白色（不变）
- **禁用**：`cursor: not-allowed`
- **Spinner**：白色，尺寸 16px，位于文字左侧
- **文字**：显示 "保存中..." 或对应操作文字

**布局**：
```
┌─────────────────────┐
│ ⟳  保存中...        │
└─────────────────────┘
```

### 4.4 Disabled 状态

**样式**：
- **背景**：`#E5E7EB`（灰色-200）
- **文字**：`#9CA3AF`（灰色-400）
- **光标**：`cursor: not-allowed`
- **阴影**：无

### 4.5 Success 状态（短暂显示）

**样式**：
- **背景**：`#10B981`（绿色-500）
- **文字**：白色
- **图标**：`CheckCircle`，白色，尺寸 16px
- **持续时间**：500ms 后恢复默认状态

## 五、Typography 规范

### 5.1 Toast 文字

**主文字**：
- **字体大小**：14px（桌面端），13px（移动端）
- **字重**：600（SemiBold）
- **行高**：1.4

**描述文字**：
- **字体大小**：13px（桌面端），12px（移动端）
- **字重**：400（Regular）
- **行高**：1.5
- **颜色**：比主文字浅 20%

### 5.2 页面内反馈文字

**主文字**：
- **字体大小**：15px（桌面端），14px（移动端）
- **字重**：600（SemiBold）
- **行高**：1.4

**描述文字**：
- **字体大小**：14px（桌面端），13px（移动端）
- **字重**：400（Regular）
- **行高**：1.5

## 六、间距规范

### 6.1 Toast 间距

- **Toast 之间**：8px
- **Toast 内部**：图标与文字 12px，主文字与描述文字 4px
- **Toast 与屏幕边缘**：24px（桌面端），16px（移动端）

### 6.2 页面内反馈间距

- **卡片与表单**：16px
- **卡片内部**：16px
- **图标与文字**：12px
- **主文字与描述文字**：4px

## 七、可访问性规范

### 7.1 颜色对比度

- **主文字**：对比度 ≥ 4.5:1（WCAG AA）
- **描述文字**：对比度 ≥ 4.5:1（WCAG AA）
- **背景与边框**：对比度 ≥ 3:1（WCAG AA）

### 7.2 屏幕阅读器支持

- **ARIA 标签**：`role="alert"`（错误/警告），`role="status"`（成功/信息）
- **ARIA 描述**：使用 `aria-describedby` 关联描述文字
- **焦点管理**：Toast 出现时不自动聚焦（避免打断用户）

### 7.3 键盘支持

- **关闭按钮**：支持 Enter 和 Space 键
- **焦点可见**：关闭按钮有明确的焦点样式（2px 蓝色边框）

## 八、响应式设计

### 8.1 桌面端（≥ 1024px）

- Toast 位置：右上角
- Toast 宽度：320px - 420px
- 字体大小：14px（主文字），13px（描述文字）

### 8.2 平板端（768px - 1023px）

- Toast 位置：右上角
- Toast 宽度：300px - 380px
- 字体大小：14px（主文字），13px（描述文字）

### 8.3 移动端（< 768px）

- Toast 位置：顶部居中
- Toast 宽度：calc(100% - 32px)
- 字体大小：13px（主文字），12px（描述文字）
- 内边距：14px

## 九、实施检查清单

### 9.1 Toast 组件

- [ ] Toaster 组件在应用根组件中渲染
- [ ] Toast 样式符合视觉规范
- [ ] Toast 动画流畅自然
- [ ] Toast 支持暗色模式
- [ ] Toast 响应式布局正确

### 9.2 页面内反馈

- [ ] 成功卡片样式符合规范
- [ ] 错误卡片样式符合规范
- [ ] 信息卡片样式符合规范
- [ ] 卡片关闭功能正常

### 9.3 按钮状态

- [ ] Loading 状态显示 Spinner
- [ ] Disabled 状态样式正确
- [ ] Hover 状态过渡流畅
- [ ] Success 状态短暂显示

### 9.4 可访问性

- [ ] 颜色对比度符合 WCAG AA
- [ ] 屏幕阅读器支持完整
- [ ] 键盘导航支持完整
- [ ] 焦点样式清晰可见

---

**设计人**：视觉设计师  
**设计时间**：2026-02-05  
**下一步**：前端工程师执行实现
