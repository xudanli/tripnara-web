# Dashboard 重新设计 PRD

## 产品经理（Danny）信息收集

### 1. 功能名称
**Dashboard 重新设计** - 优化首页信息架构与交互体验

### 2. 需求描述

**当前问题**：
- Dashboard 当前仅展示 `NLChatInterface`（对话界面），信息架构单一
- 用户需要通过对话才能访问核心功能（国家知识库、路线模版、我的行程），认知路径较长
- 缺少对当前行程状态的快速概览
- 缺少对用户关键任务的快速访问入口
- 首次用户和回访用户的体验没有差异化

**痛点**：
- **认知负荷高**：用户需要记住通过对话访问功能，学习成本高
- **效率低**：常用功能需要通过多轮对话才能访问
- **信息缺失**：无法快速了解当前行程状态、待办任务、关键决策点
- **体验割裂**：对话式交互与结构化信息展示没有有机结合

**为什么现在做**：
- 已有 `QuickAccessSection` 组件但未集成到 Dashboard
- 已有 `WelcomeSection`、`TodayTasksSection` 等组件但未使用
- 用户反馈希望有更直观的功能入口和状态概览
- 符合 TripNARA "决策优先、可执行优先"的产品哲学

### 3. 目标用户

**主要用户群体**：
- **新手用户**（首次使用）：需要引导和快速上手
- **回访用户**（有行程）：需要快速了解当前状态和继续规划
- **熟练用户**（多行程）：需要快速切换和管理多个行程

**使用场景**：
- **场景1**：用户首次登录，需要了解产品功能和开始规划
- **场景2**：用户回访，需要快速查看当前行程状态和继续规划
- **场景3**：用户需要快速访问国家知识库、路线模版等核心功能
- **场景4**：用户需要查看待办任务、决策点、预算状态等关键信息

**使用频次**：
- Dashboard 是用户每次登录的首页，使用频次最高
- 用户平均每天访问 2-3 次

**痛点强度**：
- **高**：影响用户首次使用体验和日常使用效率

### 4. 使用场景与约束

**使用场景**：
- 桌面端（1920×1080、1440×900 等）
- 移动端（375×667、414×896 等）
- 平板端（768×1024、1024×1366 等）

**约束**：
- 必须保持"对话优先"架构的核心地位
- 不能削弱自然语言交互的重要性
- 需要支持键盘导航和无障碍访问
- 需要适配不同屏幕尺寸

### 5. 成功指标

**北极星指标**：
- **用户创建可执行行程的成功率**（预期提升 15%）

**过程指标**：
- Dashboard 页面停留时间（预期提升 20%）
- 快捷入口点击率（目标 >30%）
- 从 Dashboard 到行程创建的转化率（目标 >25%）
- 对话界面使用率（保持 >60%，不能下降）
- 用户任务完成时间（预期降低 30%）

**质量指标**：
- 用户满意度（NPS 预期提升 10 分）
- 认知负荷评分（预期降低 20%）
- 可用性测试得分（SUS 预期 >80）

### 6. 核心决策门控

**不涉及路线决策门控**（Dashboard 是信息展示和导航页面）

**但需要展示决策相关信息**：
- 当前行程的 Should-Exist Gate 状态
- 预算评估结果（`ALLOW`/`NEED_ADJUST`/`REJECT`）
- 三人格评审状态
- 待确认的决策点

### 7. 可执行闭环数据

**需要展示的数据**：
- 当前行程的基本信息（目的地、日期、天数）
- 行程状态（规划中/进行中/已完成）
- 待办任务（需要澄清的问题、需要确认的决策）
- 预算状态（预算使用情况、预警状态）
- 关键决策点（需要用户确认的事项）

**不需要展示的数据**：
- 详细的行程日程（在行程详情页展示）
- 完整的决策日志（在规划工作台展示）

### 8. 相关页面设计

**现有页面**：
- `src/pages/Dashboard.tsx`（当前 Dashboard 页面）
- `src/pages/trips/index.tsx`（行程列表页）
- `src/pages/plan-studio/`（规划工作台）
- `src/pages/dashboard/`（Dashboard 相关组件目录）

**现有组件**：
- `src/components/trips/NLChatInterface.tsx`（对话界面，必须保留）
- `src/components/dashboard/QuickAccessSection.tsx`（快捷入口，需要集成）
- `src/pages/dashboard/WelcomeSection.tsx`（欢迎区域，需要集成）
- `src/pages/dashboard/TodayTasksSection.tsx`（今日任务，需要集成）
- `src/pages/dashboard/PersonaAlertsSection.tsx`（三人格提醒，需要集成）
- `src/components/layout/ConversationHistorySidebar.tsx`（对话历史侧边栏，已存在）

**新增页面**：无

**新增组件**：
- Dashboard 状态概览卡片（可选，如果需要）
- 当前行程快速操作卡片（可选，如果需要）

### 9. 用户旅程

**完整用户旅程**：

1. **用户登录** → Dashboard 页面
2. **首次用户**：
   - 看到 Welcome Modal（引导）
   - 看到欢迎区域（介绍功能）
   - 看到快捷入口（快速访问核心功能）
   - 看到对话界面（主要交互方式）
   - 通过对话或快捷入口创建行程

3. **回访用户（有当前行程）**：
   - 看到欢迎区域（显示当前行程信息）
   - 看到快捷入口（快速访问功能）
   - 看到当前行程状态卡片（快速概览）
   - 看到待办任务（需要处理的事项）
   - 看到对话界面（继续规划）
   - 点击"继续规划"或通过对话继续

4. **回访用户（无当前行程）**：
   - 看到欢迎区域（鼓励创建新行程）
   - 看到快捷入口（快速访问功能）
   - 看到对话界面（创建新行程）
   - 通过对话或快捷入口创建行程

### 10. 用户故事

**用户故事1：新手用户（首次使用）**
- **作为** 一个首次使用 TripNARA 的用户
- **我希望** 在 Dashboard 看到清晰的功能介绍和快速入口
- **以便于** 快速了解产品功能并开始规划我的第一次旅行
- **验收标准**：
  - Welcome Modal 正确显示
  - 欢迎区域清晰介绍功能
  - 快捷入口可见且可点击
  - 对话界面有引导提示

**用户故事2：回访用户（有当前行程）**
- **作为** 一个正在规划行程的用户
- **我希望** 在 Dashboard 快速查看当前行程状态和待办任务
- **以便于** 快速了解需要处理的事项并继续规划
- **验收标准**：
  - 当前行程信息正确显示
  - 待办任务清晰列出
  - "继续规划"按钮可点击
  - 对话界面显示当前会话上下文

**用户故事3：熟练用户（多行程管理）**
- **作为** 一个管理多个行程的用户
- **我希望** 在 Dashboard 快速切换和管理不同行程
- **以便于** 高效管理我的所有旅行计划
- **验收标准**：
  - 可以快速切换到其他行程
  - 行程列表清晰展示
  - 对话历史可以切换会话

### 11. 实现逻辑

**前端架构**：
- **页面组件**：`src/pages/Dashboard.tsx`（主页面）
- **布局组件**：`src/components/layout/DashboardLayout.tsx`（布局容器）
- **功能组件**：
  - `QuickAccessSection`（快捷入口）
  - `WelcomeSection`（欢迎区域）
  - `TodayTasksSection`（今日任务）
  - `NLChatInterface`（对话界面）
  - `ConversationHistorySidebar`（对话历史侧边栏）

**状态管理**：
- 使用 React Hooks（`useState`、`useEffect`）
- 行程数据：通过 `tripsApi.getAll()` 获取
- 当前行程：通过 `tripsApi.getById()` 获取
- 对话会话：通过 `NLConversationProvider` 管理

**API 调用**：
- `tripsApi.getAll()`：获取行程列表
- `tripsApi.getById()`：获取当前行程详情
- `tripsApi.getBudgetSummary()`：获取预算摘要（如果需要）
- **不需要调用** `POST /agent/route_and_run`（Dashboard 不涉及 Agent 决策）

**数据流**：
1. Dashboard 加载 → 获取行程列表
2. 如果有当前行程 → 获取行程详情
3. 渲染欢迎区域、快捷入口、状态卡片
4. 渲染对话界面（传递当前行程上下文）

### 12. 功能边界

**明确不做什么**：
- **不替代对话界面**：对话界面仍然是主要交互方式
- **不展示完整行程详情**：详情在行程详情页展示
- **不展示完整决策日志**：日志在规划工作台展示
- **不新增后端接口**：使用现有 API
- **不改变现有导航结构**：保持现有路由结构

### 13. 风险与合规关注点

**技术风险**：
- **性能风险**：Dashboard 加载多个组件可能影响性能
  - **对策**：使用懒加载、代码分割、虚拟滚动
- **兼容性风险**：不同浏览器和设备的兼容性
  - **对策**：充分测试、使用兼容性好的组件库

**体验风险**：
- **信息过载**：Dashboard 信息过多可能增加认知负荷
  - **对策**：渐进式披露、信息分层、默认折叠次要信息
- **对话界面被弱化**：快捷入口可能削弱对话界面的重要性
  - **对策**：保持对话界面在视觉和交互上的核心地位

**合规关注点**：
- **数据隐私**：用户行程数据的安全存储和传输
- **无障碍访问**：确保键盘导航和屏幕阅读器支持
- **响应式设计**：确保移动端体验良好

---

## PRD 文档目录

### 0.1 项目背景与问题定义（Why Now）
### 0.2 目标与成功指标（North Star & Metrics）
### 0.3 用户与场景（Persona / JTBD / User Journey）
### 0.4 需求范围（In/Out）与约束（数据、合规、设备、地区）
### 0.5 竞品与对标（如涉及必须搜索核验）
### 0.6 总体方案概览（信息架构、布局设计、组件组织）
### 0.7 关键流程（用户流 + 状态流 + 异常流）
### 0.8 页面与交互设计（信息架构、组件、状态、文案）
### 0.9 数据模型与字段字典（Entity/字段/来源/校验/状态机）
### 0.10 技术方案与接口（前端架构、组件设计、API 调用）
### 0.11 埋点与数据分析（事件、漏斗、A/B、质量监控）
### 0.12 风控、合规与责任边界（提示、免责声明、人工兜底）
### 0.13 灰度发布与运营配置（开关、策略、后台、实验）
### 0.14 测试方案与验收标准（用例、边界、性能、可用性）
### 0.15 风险清单与对策（技术/数据/体验/合规/成本）
### 0.16 里程碑与资源评估（排期、角色、依赖）
### 0.17 术语表与FAQ（Glossary）

---

**请输入 `/开始` 按照 Dashboard 重新设计的 PRD 文档目录进行撰写**
