# 规划工作台视觉设计评估报告

> 评估时间：2025-01-XX  
> 评估角色：视觉设计师（Visual / Brand Designer）  
> 评估对象：`src/pages/plan-studio/PlanningWorkbenchTab.tsx`  
> 评估标准：TripNARA 视觉原则与设计系统规范

---

## 📋 评估概述

本次评估从 **TripNARA 视觉原则**出发，检查规划工作台是否符合"决策感（Decision-first）"与"可靠感（Trustworthy）"的视觉要求，确保设计系统的一致性和专业性。

---

## ✅ 符合 TripNARA 视觉原则的部分

### 1. Clarity over Charm（清晰优先于讨喜）✅

**符合点**：
- ✅ **信息结构清晰**：空状态、操作区、结果展示层次分明
- ✅ **文案直接**："做决策与做取舍的地方" - 明确表达功能定位
- ✅ **无装饰性元素**：没有多余的装饰、渐变、氛围滤镜
- ✅ **功能优先**：每个元素都有明确的功能目的

**代码位置**：
- 第 268-373 行：空状态设计清晰，三人格介绍直接
- 第 474-524 行：综合决策卡片突出，信息层次明确

---

### 2. Evidence is the aesthetic（证据就是美学）✅

**符合点**：
- ✅ **证据展示**：PersonaCard 中展示证据列表（第 70-95 行）
- ✅ **证据来源**：显示 `evidence.source`（来源）
- ✅ **证据相关性**：显示 `evidence.relevance`（相关性）
- ✅ **证据抽屉集成**：EvidenceDrawer 组件已集成（第 718-724 行）

**代码位置**：
- `PersonaCard.tsx` 第 70-95 行：证据列表展示
- `PlanningWorkbenchTab.tsx` 第 511-522 行：决策日志入口

**改进建议**：
- ⚠️ 证据展示可以更"研究/审计工具"化：添加时间戳、可信度指标
- ⚠️ 证据引用位置可以更明确：关联到具体的决策点或路段

---

### 3. Decision is a UI primitive（决策是 UI 原语）✅

**符合点**：
- ✅ **四态裁决系统**：使用 `getGateStatusClasses`、`getGateStatusIcon`、`getGateStatusLabel`
- ✅ **状态一致性**：综合决策、三人格评估都使用统一的状态系统
- ✅ **状态视觉化**：Badge + Icon + 颜色编码

**代码位置**：
- 第 232-260 行：`getConsolidatedDecisionStyle` 函数
- 第 475-489 行：综合决策状态展示
- `PersonaCard.tsx` 第 52-58 行：三人格状态展示

**符合度**：✅ **优秀** - 状态系统使用一致，符合"决策是 UI 原语"原则

---

### 4. Friction is intentional（摩擦是设计出来的）⚠️

**当前状态**：
- ✅ 提交方案有确认对话框（第 609-651 行）
- ✅ 调整方案有确认对话框（第 656-694 行）
- ⚠️ **缺失**：NEED_CONFIRM 状态的"阻断式确认"设计

**问题**：
- ❌ 当决策为 `NEED_CONFIRM` 时，没有"确认点清单 + 风险解释 + 用户签收式交互"
- ❌ 提交按钮在 `REJECT` 时隐藏，但在 `NEED_CONFIRM` 时应该"有分寸地阻止"

**改进建议**：
- 🔴 **高优先级**：为 `NEED_CONFIRM` 状态添加确认点清单组件
- 🔴 **高优先级**：提交对话框应该根据决策状态显示不同的确认流程

---

### 5. Quiet confidence（安静的自信）✅

**符合点**：
- ✅ **留白充足**：`space-y-6`、`space-y-4` 等间距使用合理
- ✅ **比例协调**：卡片、按钮、文字大小比例合理
- ✅ **细节一致**：圆角、边框、阴影使用一致
- ✅ **无炫技**：没有过度的动效或装饰

**代码位置**：
- 第 262-373 行：空状态布局，留白充足
- 第 472-605 行：结果展示区域，层次清晰

---

## ⚠️ 需要改进的设计问题

### 问题 1: 三人格视觉呈现 - 使用 Emoji 而非符号系统 ❌

**当前实现**：
```tsx
<span className="text-3xl">🐻‍❄️</span>  // Abu
<span className="text-3xl">🐕</span>   // Dr.Dre
<span className="text-3xl">🦦</span>   // Neptune
```

**问题**：
- ❌ **违反设计原则**：使用 Emoji 而非"专业守护者"的符号系统
- ❌ **不符合视觉规范**：三人格应该是"决策维度"的符号系统，不是卡通人物

**设计要求**（根据视觉设计师规范）：
- Abu：边界、盾、门、警戒 → 应该使用几何符号（如 Shield、Lock、Gate）
- Dr.Dre：节奏、脉冲、呼吸、时间窗 → 应该使用节奏符号（如 Activity、Pulse、Clock）
- Neptune：空间、轨迹、结构、修复 → 应该使用结构符号（如 RefreshCw、Compass、Layers）

**改进建议**：
- 🔴 **高优先级**：将 Emoji 替换为 Lucide React 图标
- 🔴 **高优先级**：使用 `Shield`（Abu）、`Activity`（Dr.Dre）、`RefreshCw`（Neptune）
- 🔴 **高优先级**：使用三人格颜色系统（`persona-abu`、`persona-dre`、`persona-neptune`）

**代码位置**：
- 第 290、305、320 行：空状态中的三人格 Emoji
- `PersonaCard.tsx` 第 44 行：PersonaCard 中的 Emoji

---

### 问题 2: 颜色使用不够克制 - 硬编码颜色值 ⚠️

**当前实现**：
```tsx
className="p-2 bg-green-50 border border-green-200"  // 可执行性验证
className="p-3 bg-blue-50 border border-blue-200"     // 提示信息
className="p-3 bg-orange-50 border border-orange-200" // 风险提示
```

**问题**：
- ⚠️ **硬编码颜色**：直接使用 `bg-green-50`、`bg-blue-50` 等，没有使用设计 Token
- ⚠️ **不符合设计系统**：应该使用 CSS 变量或 Tailwind 配置的颜色

**改进建议**：
- 🟡 **中优先级**：使用设计 Token（如 `bg-gate-allow`、`bg-muted`）
- 🟡 **中优先级**：统一使用 `src/styles/globals.css` 中定义的颜色变量

**代码位置**：
- 第 954 行：`bg-green-50 border-green-200`
- 第 975 行：`bg-blue-50 border-blue-200`
- 第 1005 行：`bg-orange-50 border-orange-200`

---

### 问题 3: 信息层级可以更清晰 ⚠️

**当前层级**：
1. 综合决策（`border-2 shadow-lg`）
2. 方案预览
3. DEM 地形与体力模型
4. 三人格评估
5. 规划状态（可折叠）

**问题**：
- ⚠️ **方案预览和 DEM 地形位置**：这两个新增功能应该放在什么位置？
- ⚠️ **视觉权重**：方案预览和 DEM 地形的视觉权重是否合适？

**改进建议**：
- 🟡 **中优先级**：考虑将"方案预览"和"DEM 地形"合并为一个"方案详情"区域
- 🟡 **中优先级**：或者明确信息层级：决策 → 方案 → 评估 → 技术信息

---

### 问题 4: 方案对比对话框 - 信息密度过高 ⚠️

**当前实现**：
- 使用表格布局对比方案（第 1150-1300+ 行）
- 大尺寸对话框（`max-w-6xl`）

**问题**：
- ⚠️ **信息密度**：表格 + 卡片 + 提示信息，信息密度较高
- ⚠️ **可读性**：在小屏幕上可能难以阅读

**改进建议**：
- 🟡 **中优先级**：考虑使用 Tab 切换不同对比视图
- 🟡 **中优先级**：或者使用更简洁的对比卡片布局

---

### 问题 5: 空状态设计 - 可以更专业 ⚠️

**当前实现**：
- 使用 Emoji 展示三人格（第 290、305、320 行）
- 使用数字徽章展示决策流程（第 338-369 行）

**问题**：
- ⚠️ **Emoji 使用**：不符合"专业守护者"定位
- ✅ **流程说明**：数字徽章设计合理

**改进建议**：
- 🔴 **高优先级**：将 Emoji 替换为图标
- 🟢 **低优先级**：可以考虑添加简单的插画或图标系统

---

## 🎨 设计 Token 使用评估

### ✅ 正确使用的 Token

1. **间距系统**：
   - ✅ `space-y-6`、`space-y-4`、`space-y-2` - 符合 4px 基础单位
   - ✅ `gap-4`、`gap-3`、`gap-2` - 间距使用一致

2. **圆角系统**：
   - ✅ `rounded-lg`、`rounded` - 圆角使用一致

3. **状态系统**：
   - ✅ `getGateStatusClasses` - 使用设计 Token
   - ✅ `getGateStatusIcon` - 图标系统一致

### ⚠️ 需要改进的 Token 使用

1. **颜色 Token**：
   - ⚠️ 硬编码颜色值（`bg-green-50`、`bg-blue-50`）
   - 应该使用：`bg-gate-allow`、`bg-muted`、`bg-primary/10`

2. **字体 Token**：
   - ✅ 大部分使用 Tailwind 默认字体系统
   - ⚠️ 数字排版（金额、时间）可以更优化

---

## 📊 信息层级评估

### 当前信息层级

```
第一层（最重要）：
├── 综合决策（border-2 shadow-lg）✅
└── [查看决策日志] 按钮 ✅

第二层（重要）：
├── 方案预览 ✅
├── DEM 地形与体力模型 ✅
└── 三人格评估 ✅

第三层（次要）：
└── 规划状态（可折叠）✅
```

### 评估结果

**符合度**：✅ **良好** - 信息层级清晰，符合"渐进式信息披露"原则

**改进建议**：
- 🟡 可以考虑将"方案预览"和"DEM 地形"合并为"方案详情"区域
- 🟡 或者明确标注每个区域的优先级（使用视觉权重）

---

## 🎯 符合 TripNARA 设计哲学评估

### ✅ 符合的设计哲学

1. **Clarity over Charm** ✅
   - 信息结构清晰
   - 无装饰性元素
   - 功能优先

2. **Evidence is the aesthetic** ✅
   - 证据展示清晰
   - 证据来源明确
   - 证据抽屉集成

3. **Decision is a UI primitive** ✅
   - 四态裁决系统一致
   - 状态视觉化清晰

4. **Quiet confidence** ✅
   - 留白充足
   - 比例协调
   - 细节一致

### ⚠️ 需要改进的设计哲学

1. **Friction is intentional** ⚠️
   - 缺失 NEED_CONFIRM 的"阻断式确认"设计
   - 提交流程可以更"有分寸地阻止"

---

## 🚫 设计禁忌检查

### ✅ 未违反的禁忌

1. ✅ **无小红书式种草 UI**：没有大图堆叠、情绪化文案、氛围滤镜
2. ✅ **无炫技动效**：动效使用克制，主要用于状态解释
3. ✅ **颜色不承担全部信息**：使用层级、布局、标签系统

### ❌ 违反的禁忌

1. ❌ **卡通拟人三人格**：
   - 使用 Emoji（🐻‍❄️、🐕、🦦）而非符号系统
   - 违反"专业守护者"定位

---

## 📋 具体改进建议

### 🔴 高优先级（立即修复）

#### 1. 替换三人格 Emoji 为图标系统

**当前代码**：
```tsx
// 第 290、305、320 行
<span className="text-3xl">🐻‍❄️</span>  // Abu
<span className="text-3xl">🐕</span>   // Dr.Dre
<span className="text-3xl">🦦</span>   // Neptune
```

**改进方案**：
```tsx
// 使用 Lucide React 图标
<Shield className="w-8 h-8 text-persona-abu" />      // Abu
<Activity className="w-8 h-8 text-persona-dre" />    // Dr.Dre
<RefreshCw className="w-8 h-8 text-persona-neptune" /> // Neptune
```

**实施位置**：
- `PlanningWorkbenchTab.tsx` 第 290、305、320 行
- `PersonaCard.tsx` 第 44 行

#### 2. 添加 NEED_CONFIRM 状态的确认点清单

**当前问题**：
- 当决策为 `NEED_CONFIRM` 时，提交按钮仍然可以点击
- 没有"确认点清单 + 风险解释 + 用户签收式交互"

**改进方案**：
- 创建 `ConfirmPanel` 组件
- 在提交对话框中根据决策状态显示不同的确认流程
- `NEED_CONFIRM` 时显示确认点清单和风险解释

**实施位置**：
- `PlanningWorkbenchTab.tsx` 第 609-651 行（提交方案对话框）

### 🟡 中优先级（近期优化）

#### 3. 统一颜色 Token 使用

**改进方案**：
- 将所有硬编码颜色替换为设计 Token
- `bg-green-50` → `bg-gate-allow` 或 `bg-muted`
- `bg-blue-50` → `bg-muted` 或自定义 Token
- `bg-orange-50` → `bg-gate-confirm` 或自定义 Token

**实施位置**：
- `PlanningWorkbenchTab.tsx` 第 954、975、1005 行

#### 4. 优化方案对比对话框信息密度

**改进方案**：
- 使用 Tab 切换不同对比视图
- 或者使用更简洁的对比卡片布局
- 减少单屏信息量

**实施位置**：
- `PlanningWorkbenchTab.tsx` 第 1150-1300+ 行（PlanComparisonView）

### 🟢 低优先级（后续优化）

#### 5. 优化空状态设计

**改进方案**：
- 考虑添加简单的插画或图标系统
- 保持专业、克制的风格

#### 6. 增强证据展示的"研究/审计工具"感

**改进方案**：
- 添加时间戳显示
- 添加可信度指标
- 明确证据引用位置

---

## ✅ 验收标准

### 高优先级改进

- [ ] 三人格 Emoji 已替换为图标系统
- [ ] 三人格图标使用设计 Token 颜色
- [ ] NEED_CONFIRM 状态有确认点清单组件
- [ ] 提交流程根据决策状态显示不同确认流程

### 中优先级改进

- [ ] 硬编码颜色已替换为设计 Token
- [ ] 方案对比对话框信息密度优化
- [ ] 信息层级更清晰

### 低优先级改进

- [ ] 空状态设计优化
- [ ] 证据展示增强

---

## 📝 总结

### 整体评估：**良好，但有改进空间**

**优势**：
- ✅ 信息层级清晰
- ✅ 状态系统使用一致
- ✅ 符合"清晰优先"原则
- ✅ 无装饰性元素

**主要问题**：
- ❌ 三人格使用 Emoji 而非符号系统（违反设计原则）
- ⚠️ 缺失 NEED_CONFIRM 的"阻断式确认"设计
- ⚠️ 部分硬编码颜色值

**改进优先级**：
1. 🔴 **立即修复**：替换三人格 Emoji、添加确认点清单
2. 🟡 **近期优化**：统一颜色 Token、优化信息密度
3. 🟢 **后续优化**：增强证据展示、优化空状态

**符合 TripNARA 视觉原则度**：**75%** ✅

---

## 🎨 设计交付物建议

### 需要创建的组件

1. **ConfirmPanel 组件**
   - 确认点清单
   - 风险解释
   - 用户签收式交互

2. **PersonaIcon 组件**
   - 统一的三人格图标组件
   - 使用设计 Token 颜色
   - 支持不同尺寸

3. **EvidenceCard 组件**
   - 证据展示卡片
   - 显示来源、时间戳、可信度
   - "研究/审计工具"风格

### 需要更新的 Token

1. **颜色 Token**：
   - 添加 `bg-evidence`、`bg-evidence-border` 等
   - 统一验证、提示、风险的颜色

2. **间距 Token**：
   - 确保所有间距使用 4px 基础单位

---

**评估完成时间**：2025-01-XX  
**下一步行动**：实施高优先级改进
